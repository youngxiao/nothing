
<!DOCTYPE html>
<html>
<head>
<title>New Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
/* GitHub stylesheet for MarkdownPad (http://markdownpad.com) */
/* Author: Nicolas Hery - http://nicolashery.com */
/* Version: b13fe65ca28d2e568c6ed5d7f06581183df8f2ff */
/* Source: https://github.com/nicolahery/markdownpad-github */

/* RESET
=============================================================================*/

html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
}

/* BODY
=============================================================================*/

body {
  font-family: Helvetica, arial, freesans, clean, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #333;
  background-color: #fff;
  padding: 20px;
  max-width: 960px;
  margin: 0 auto;
}

body>*:first-child {
  margin-top: 0 !important;
}

body>*:last-child {
  margin-bottom: 0 !important;
}

/* BLOCKS
=============================================================================*/

p, blockquote, ul, ol, dl, table, pre {
  margin: 15px 0;
}

/* HEADERS
=============================================================================*/

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
  font-size: inherit;
}

h1 {
  font-size: 28px;
  color: #000;
}

h2 {
  font-size: 24px;
  border-bottom: 1px solid #ccc;
  color: #000;
}

h3 {
  font-size: 18px;
}

h4 {
  font-size: 16px;
}

h5 {
  font-size: 14px;
}

h6 {
  color: #777;
  font-size: 14px;
}

body>h2:first-child, body>h1:first-child, body>h1:first-child+h2, body>h3:first-child, body>h4:first-child, body>h5:first-child, body>h6:first-child {
  margin-top: 0;
  padding-top: 0;
}

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0;
}

h1+p, h2+p, h3+p, h4+p, h5+p, h6+p {
  margin-top: 10px;
}

/* LINKS
=============================================================================*/

a {
  color: #4183C4;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

/* LISTS
=============================================================================*/

ul, ol {
  padding-left: 30px;
}

ul li > :first-child, 
ol li > :first-child, 
ul li ul:first-of-type, 
ol li ol:first-of-type, 
ul li ol:first-of-type, 
ol li ul:first-of-type {
  margin-top: 0px;
}

ul ul, ul ol, ol ol, ol ul {
  margin-bottom: 0;
}

dl {
  padding: 0;
}

dl dt {
  font-size: 14px;
  font-weight: bold;
  font-style: italic;
  padding: 0;
  margin: 15px 0 5px;
}

dl dt:first-child {
  padding: 0;
}

dl dt>:first-child {
  margin-top: 0px;
}

dl dt>:last-child {
  margin-bottom: 0px;
}

dl dd {
  margin: 0 0 15px;
  padding: 0 15px;
}

dl dd>:first-child {
  margin-top: 0px;
}

dl dd>:last-child {
  margin-bottom: 0px;
}

/* CODE
=============================================================================*/

pre, code, tt {
  font-size: 12px;
  font-family: Consolas, "Liberation Mono", Courier, monospace;
}

code, tt {
  margin: 0 0px;
  padding: 0px 0px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px;
}

pre>code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent;
}

pre {
  background-color: #f8f8f8;
  border: 1px solid #ccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px;
}

pre code, pre tt {
  background-color: transparent;
  border: none;
}

kbd {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #DDDDDD;
    background-image: linear-gradient(#F1F1F1, #DDDDDD);
    background-repeat: repeat-x;
    border-color: #DDDDDD #CCCCCC #CCCCCC #DDDDDD;
    border-image: none;
    border-radius: 2px 2px 2px 2px;
    border-style: solid;
    border-width: 1px;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    line-height: 10px;
    padding: 1px 4px;
}

/* QUOTES
=============================================================================*/

blockquote {
  border-left: 4px solid #DDD;
  padding: 0 15px;
  color: #777;
}

blockquote>:first-child {
  margin-top: 0px;
}

blockquote>:last-child {
  margin-bottom: 0px;
}

/* HORIZONTAL RULES
=============================================================================*/

hr {
  clear: both;
  margin: 15px 0;
  height: 0px;
  overflow: hidden;
  border: none;
  background: transparent;
  border-bottom: 4px solid #ddd;
  padding: 0;
}

/* TABLES
=============================================================================*/

table th {
  font-weight: bold;
}

table th, table td {
  border: 1px solid #ccc;
  padding: 6px 13px;
}

table tr {
  border-top: 1px solid #ccc;
  background-color: #fff;
}

table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

/* IMAGES
=============================================================================*/

img {
  max-width: 100%
}
</style>
</head>
<body>
<h1>00.连接配置</h1>
<pre><code>******************************************************************************;
*** 00连接配置 ***; 
******************************************************************************; 
options compress=binary cpucount=4 mergenoby = error obs = MAX;
options errors=2 nocenter linesize = max pagesize = MAX macrogen;
%let folder = %str(/sas/data1/rawdata1/f15);

*** 风控服务器 sas_f15 路径：  /sas/data1/rawdata1/f15;
*** 逻辑库 pm1: POS_M1 催收评分卡逻辑库;
*** 逻辑库 pm1m: POS_M1 催收评分卡监控逻辑库;
libname f15 &quot;/sas/data1/rawdata1/f15&quot;;
libname pm1   &quot;/sas/data1/rawdata1/f15/Cuishou_ScoreCard/M1_POS/socrecard&quot;;
libname pm1m&quot;/sas/data1/rawdata1/f15/Cuishou_ScoreCard/M1_POS/monitor&quot;;

*** 用到的宏;
%include &quot;/sas/data1/rawdata1/f15/Cuishou_ScoreCard/M1_POS/00_Macro_F01.sas&quot;;
%include &quot;/sas/data1/rawdata1/f15/Cuishou_ScoreCard/M1_POS/00_Macro_PSI_SSI_Calculation.sas&quot;;

*** 文件输出路径;
%let output_file  = /sas/data1/rawdata1/f15/Cuishou_ScoreCard/M1_POS/files;

*** 连接Hadoop数仓*;
options set=SAS_HADOOP_JAR_PATH=&quot;/sas/data1/Hadoop_Product/lib&quot;;
options set=SAS_HADOOP_CONFIG_PATH=&quot;/sas/data1/Hadoop_Product/conf&quot;;

*** 逻辑库 tmp_dcc：hive 平台，原数据决策中心临时文件库，包含宽表数据;
libname tmp_dcc
hadoop user='yang.xiao' password='*******' server='*.*.*.*' port=10000 database='tmp_dcc' subprotocol='hive2'
   properties=&quot;hive.fetch.task.conversion.threshold=-1;hive.fetch.task.conversion=more&quot;;
</code></pre>

<p>`</p>
<h1>01.导入数据</h1>
<pre><code>******************************************************************************;
*** 01 导入数据;
******************************************************************************;
*** 201611-201708 的数据已经按照一致变量顺序，数据类型存入 f15 中，表名称形如：f15.m1_pos_cs_base_v1_201611；
*** 导入201709，201710 新的是数据，hive生成的新的 m1 pos数据均用此宏导入到f15;
%macro dataInput(Dsin,Dsout);
proc sql;   
create table &amp;Dsout as  
select *
from &amp;Dsin
   (dbsastype=(
                contract_no  ='char(30)'
                putout_date  ='char(10)' 
                state_date ='char(10)' 
                customerid   ='char(20)' 
                acct_loan_no   ='char(30)'
                city         ='char(60)'
                province        ='char(60)'
                relativetype   ='char(20)'  
                total_wk_exp='char(20)'  
                cert_4_inital ='char(20)'  
                insure_status   ='char(20)'  
                insure_type   ='char(20)'  
                totalscore ='char(20)'  
                operatemode='char(20)'  
                pos_type='char(20)'  
                productcategoryname   ='char(20)'  
                goods_type   ='char(20)'  
));
%mend;
/*%let Dsin=tmp_dcc.m1_rsx_cs_base_v1_1709_tmp;%let Dsout=f15.m1_rsx_cs_base_v1_1709_tmp;%dataInput(&amp;Dsin,&amp;Dsout);*/
/*%let Dsin=tmp_dcc.m1_rsx_cs_base_v1_1710_tmp;%let Dsout=f15.m1_rsx_cs_base_v1_1710_tmp;%dataInput(&amp;Dsin,&amp;Dsout);*/

*** 9.10月数据预处理，新数据均用此宏预处理*;
%macro Predata(Dsin,Dsout);
data &amp;Dsout;
set &amp;Dsin;
** 日期处理 **;
  putout_month_cha=substr(putout_date,3,2)||substr(putout_date,6,2);
  state_month_cha=substr(state_date,3,2)||substr(state_date,6,2);
  putout_date_num=input(putout_date,YYMMDD10.);
  state_date_num=input(state_date,YYMMDD10.);
  format state_date_num YYMMDD10. putout_date_num YYMMDD10.;
  day_diff = intck('day',putout_date_num,state_date_num);
  if target &gt;=0;
  if day_diff &gt; 61;
run;
%mend;
/*%let Dsin=f15.m1_rsx_cs_base_v1_1709_tmp;%let Dsout=f15.m1_pos_201709_tmp;%Predata(&amp;Dsin,&amp;dsout);*/
/*%let Dsin=f15.m1_rsx_cs_base_v1_1710_tmp;%let Dsout=f15.m1_pos_201710_tmp;%Predata(&amp;Dsin,&amp;dsout);*/

*** 保证9.10月数据字段顺序及数据类型与之前数据集保持一致性*;
*** 数据类型保持一致;
%macro sametype(Dset);
data &amp;Dset;set &amp;Dset;
education1=put(education,8.);drop education;rename education1=education;
email1=put(email,8.);drop email;rename email1=email;
f_same_com1=put(f_same_com,8.);drop f_same_com;rename f_same_com1=f_same_com;
f_same_reg1=put(f_same_reg,8.);drop f_same_reg;rename f_same_reg1=f_same_reg;
family_state1=put(family_state,8.);drop family_state;rename family_state1=family_state;
house_type1=put(house_type,8.);drop house_type;rename house_type1=house_type;
inner_code1=put(inner_code,8.);drop inner_code;rename inner_code1=inner_code;
is_certid_province1=put(is_certid_province,8.);drop is_certid_province;rename is_certid_province1=is_certid_province;
is_ssi1=put(is_ssi,8.);drop is_ssi;rename is_ssi1=is_ssi;
is_suixinhuan1=put(is_suixinhuan,8.);drop is_suixinhuan;rename is_suixinhuan1=is_suixinhuan;
is_work_hr1=put(is_work_hr,8.);drop is_work_hr;rename is_work_hr1=is_work_hr;
other_person_type1=put(other_person_type,8.);drop other_person_type;rename other_person_type1=other_person_type;
person_sex1=put(person_sex,8.);drop person_sex;rename person_sex1=person_sex;
total_wk_exp1=input(total_wk_exp,8.);drop total_wk_exp;rename total_wk_exp1=total_wk_exp;
max_roll_seq1=input(max_roll_seq,8.);drop max_roll_seq;rename max_roll_seq1=max_roll_seq;
run;
%mend;
/*%let Dset=f15.m1_pos_201709_tmp;%sametype(&amp;Dset);*/
/*%let Dset=f15.m1_pos_201710_tmp;%sametype(&amp;Dset);*/

*** 字段顺序保持一致;
%macro sameorder(Dsin,Dsout);
proc sql;
create table &amp;Dsout as select
CONTRACT_NO
,CUSTOMERID
,ACCT_LOAN_NO
,PUTOUT_DATE
,STATE_DATE
,CPD
,TARGET
,CERT_4_INITAL
,CITY
,EDUCATION
,EMAIL
,F_SAME_COM
,F_SAME_REG
,FAMILY_STATE
,GOODS_TYPE
,HOUSE_TYPE
,INNER_CODE
,INSURE_STATUS
,INSURE_TYPE
,IS_CERTID_PROVINCE
,IS_SSI
,IS_SUIXINHUAN
,IS_WORK_HR
,MOST_CONTACT_3M
,OPERATEMODE
,OTHER_PERSON_TYPE
,PERSON_SEX
,POS_TYPE
,PRODUCTCATEGORYNAME
,PROVINCE
,RELATIVETYPE
,ACTUALPAYFEE
,ACTUALPAYFINE
,ACTUALPAYFINECNT
,ACTUALPAYINTEAMT
,ACTUALPAYPRINCIPALNFEE
,ACTUALPAYPRINCIPLE
,APP_COUNT
,APR_COUNT
,APR_CREDIT_AMOUNT
,APR_PAYMENT_NUM
,AVG_DAYS
,AVG_ROLLSEQ
,BPTP
,BPTP_RATIO
,CERTF_INTERVAL_YEARS
,CHEXIAO_COUNT
,CHILDRENTOTAL
,CON1_DUE_TIMES
,CON10_DUE_TIMES
,CON5_DUE_TIMES
,CONLOST
,CONTACT
,CREDIT_AMOUNT
,CS_TIMES
,CSFQ
,CUSTOMERSERVICERATES
,DELAY_DAYS
,DELAY_TIMES
,DUE_CONTACT_RATIO
,DUE_CSTIME_RATIO
,DUE_DELAY_RATIO
,DUE_PERIODS
,DUE_PERIODS_RATIO
,DUE_PTP_RATIO
,EFFECTIVEANNUALRATE
,EXPENSE_MONTH
,EXTRA_INIT_RATE
,FAMILY_INCOME
,FINE10_SEQ_RATIO
,FINISH_PERIODS
,FINISH_PERIODS_RATIO
,FNBM_TIMES
,HIS_DUESEQ
/*,HIS_PTPDAYS*/
,INCM_TIMES
,INIT_PAY
,INTER3_COUNT
,INTIME_PAY
,IS10FINE
,JOBTIME
,KPTP
,KPTP_RATIO
,LAST3YEAR_WORKCHANGE_NUM
,LOST
,MANAGEMENTFEESRATE
,MAX_CONDUE1
,MAX_CONDUE10
,MAX_CONDUE5
,MAX_CPD
,MAX_OVERDUE
,MAX_ROLL_SEQ
,MAX_SEQ_DUEDAYS
,MIN_INIT_RATE
,MONTHLYINTERESTRATE
,N_CUR_BALANCE
,ONTIME_PAY
,OTHER_INCOME
,OVER_DUE_VALUE
,OVERDUE_PERIODS_RATIO
,PAY_PERIODS
,PAYFEE
,PAYFINE
,PAYFINECNT
,PAYINTEAMT
,PAYMENT_RATE
,PAYPRINCIPALNFEE
,PAYPRINCIPLE
,PERIODS
,PERSON_APP_AGE
,PRICE
,PTP
,PUTOUT_SAGROUP
,QQ_LENGTH
,QQNO_INIT
,RECENT_CONTACT_DAY
,REJ_COUNT
,ROLL_BACK
,ROLL_BACK_SEQ
,SALESCOMMISSION
,SELF_INCOME
,SEQ_DELAY_DAYS
,SEQ_DUEDAYS
,STATE_SAGROUP
,TOT_CREDIT_AMOUNT
,TOTAL_WK_EXP
,VALUE_BALANCE_RATIO
,VALUE_INCOME_RATIO
from &amp;dsin;
quit;
%mend;

/*%let Dsin=f15.m1_pos_201709_tmp;%let Dsout=f15.m1_pos_cs_base_v1_201709;%sameorder(&amp;Dsin,&amp;Dsout);*/
/*%let Dsin=f15.m1_pos_201710_tmp;%let Dsout=f15.m1_pos_cs_base_v1_201710;%sameorder(&amp;Dsin,&amp;Dsout);*/


*!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
*** 注意，为了保留 M1 POS的原始数据，防止被改变，把上面的代码可以注释掉，先将数据 data set 
到 pm1 逻辑库   &quot;/sas/data1/rawdata1/f15/Cuishou_ScoreCard/M1_POS/socrecard&quot;;
************************************************************************************************;
data pm1.m1_pos_cs_base_v1_201611;set f15.m1_pos_cs_base_v1_201611;run;
data pm1.m1_pos_cs_base_v1_201612;set f15.m1_pos_cs_base_v1_201612;run;
data pm1.m1_pos_cs_base_v1_201701;set f15.m1_pos_cs_base_v1_201701;run;
data pm1.m1_pos_cs_base_v1_201702;set f15.m1_pos_cs_base_v1_201702;run;
data pm1.m1_pos_cs_base_v1_201703;set f15.m1_pos_cs_base_v1_201703;run;
data pm1.m1_pos_cs_base_v1_201704;set f15.m1_pos_cs_base_v1_201704;run;
data pm1.m1_pos_cs_base_v1_201705;set f15.m1_pos_cs_base_v1_201705;run;
data pm1.m1_pos_cs_base_v1_201706;set f15.m1_pos_cs_base_v1_201706;run;
data pm1.m1_pos_cs_base_v1_201707;set f15.m1_pos_cs_base_v1_201707;run;
data pm1.m1_pos_cs_base_v1_201708;set f15.m1_pos_cs_base_v1_201708;run;
data pm1.m1_pos_cs_base_v1_201709;set f15.m1_pos_cs_base_v1_201709;run;
data pm1.m1_pos_cs_base_v1_201710;set f15.m1_pos_cs_base_v1_201710;run;
</code></pre>

<h1>02.数据EDA</h1>
<pre><code>******************************************************************************;
*** 02 数据EDA;
******************************************************************************;

%macro dataeda(Dset,outfile);
%let varlist= 
CPD
TARGET
ACTUALPAYFEE
ACTUALPAYFINE
ACTUALPAYFINECNT
ACTUALPAYINTEAMT
ACTUALPAYPRINCIPALNFEE
ACTUALPAYPRINCIPLE
APP_COUNT
APR_COUNT
APR_CREDIT_AMOUNT
APR_PAYMENT_NUM
avg_days
AVG_ROLLSEQ
BPTP
BPTP_RATIO
CERTF_INTERVAL_YEARS
CHEXIAO_COUNT
CHILDRENTOTAL
CON1_DUE_TIMES
CON10_DUE_TIMES
CON5_DUE_TIMES
CONLOST
CONTACT
CREDIT_AMOUNT
CS_TIMES
CSFQ
CUSTOMERSERVICERATES
DELAY_DAYS
DELAY_TIMES
DUE_CONTACT_RATIO
DUE_CSTIME_RATIO
DUE_DELAY_RATIO
DUE_PERIODS
DUE_PERIODS_RATIO
DUE_PTP_RATIO
EFFECTIVEANNUALRATE
EXPENSE_MONTH
EXTRA_INIT_RATE
FAMILY_INCOME
FINE10_SEQ_RATIO
FINISH_PERIODS
FINISH_PERIODS_RATIO
FNBM_TIMES
HIS_DUESEQ
INCM_TIMES
INIT_PAY
INTER3_COUNT
INTIME_PAY
IS10FINE
JOBTIME
KPTP
KPTP_RATIO
LAST3YEAR_WORKCHANGE_NUM
LOST
MANAGEMENTFEESRATE
MAX_CONDUE1
MAX_CONDUE10
MAX_CONDUE5
MAX_CPD
MAX_OVERDUE
MAX_ROLL_SEQ
MAX_SEQ_DUEDAYS
MIN_INIT_RATE
MONTHLYINTERESTRATE
N_CUR_BALANCE
ONTIME_PAY
OTHER_INCOME
OVER_DUE_VALUE
OVERDUE_PERIODS_RATIO
PAY_PERIODS
PAYFEE
PAYFINE
PAYFINECNT
PAYINTEAMT
PAYMENT_RATE
PAYPRINCIPALNFEE
PAYPRINCIPLE
PERIODS
PERSON_APP_AGE
PRICE
PTP
PUTOUT_SAGROUP
QQ_LENGTH
QQNO_INIT
RECENT_CONTACT_DAY
REJ_COUNT
ROLL_BACK
ROLL_BACK_SEQ
SALESCOMMISSION
SELF_INCOME
SEQ_DELAY_DAYS
SEQ_DUEDAYS
STATE_SAGROUP
TOT_CREDIT_AMOUNT
TOTAL_WK_EXP
VALUE_BALANCE_RATIO
value_income_ratio
;
ods HTML file=&quot;&amp;output_file./m1_pos_&amp;outfile..xls&quot;;
proc means data =  &amp;Dset   /*QMETHOD=P2*/  n nmiss mean median min max p1 p10 p25 p50 p75 p90 p95;
var &amp;varlist.;   
run;
ods html close;
%mend;

%let Dset= pm1.m1_pos_cs_base_v1_201611;%let outfile=201611;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201612;%let outfile=201612;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201701;%let outfile=201701;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201702;%let outfile=201702;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201703;%let outfile=201703;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201704;%let outfile=201704;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201705;%let outfile=201705;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201706;%let outfile=201706;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201707;%let outfile=201707;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201708;%let outfile=201708;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201709;%let outfile=201709;%dataeda(&amp;Dset,&amp;outfile);
%let Dset= pm1.m1_pos_cs_base_v1_201710;%let outfile=201710;%dataeda(&amp;Dset,&amp;outfile);
</code></pre>

<h1>03.数据样本集</h1>
<pre><code>******************************************************************************;
*** 03 数据样本集;
*** 确定 train valid test 数据集;
******************************************************************************;

*** 添加一个观测月 字段;
%macro keepvars(month);
data pm1.a0301_ds_&amp;month.;
set f15.m1_pos_cs_base_v1_&amp;month.;
      state_month=cats(substr(state_date,3,2),substr(state_date,6,2));
run;
%mend;

%keepvars(201611);%keepvars(201612);%keepvars(201701);%keepvars(201702);%keepvars(201703);%keepvars(201704);
%keepvars(201705);%keepvars(201706);%keepvars(201707);%keepvars(201708);%keepvars(201709);%keepvars(201710);

*** 数据集分配 train(201704),valid(201705),test(201611-12,201701-201703,201706-201708);
data pm1.a0302_train;set pm1.a0301_ds_201704;run;
data pm1.a0302_valid;set pm1.a0301_ds_201705;run;
data pm1.a0302_test;set pm1.a0301_ds_201611 pm1.a0301_ds_201612 pm1.a0301_ds_201701 pm1.a0301_ds_201702 pm1.a0301_ds_201703 
pm1.a0301_ds_201706 pm1.a0301_ds_201707 pm1.a0301_ds_201708;run;  

*** 数据集分配 test 分月;
data pm1.a0302_test_1611;set pm1.a0301_ds_201611;run;
data pm1.a0302_test_1612;set pm1.a0301_ds_201612;run;
data pm1.a0302_test_1701;set pm1.a0301_ds_201701;run;
data pm1.a0302_test_1702;set pm1.a0301_ds_201702;run;
data pm1.a0302_test_1703;set pm1.a0301_ds_201703;run;
data pm1.a0302_test_1706;set pm1.a0301_ds_201706;run;
data pm1.a0302_test_1707;set pm1.a0301_ds_201707;run;
data pm1.a0302_test_1708;set pm1.a0301_ds_201708;run;
data pm1.a0302_test_1709;set pm1.a0301_ds_201709;run;
data pm1.a0302_test_1710;set pm1.a0301_ds_201710;run;

*****************************************************************************;
*** 小结：本段代码在逻辑库 lf 中生成训练集,验证集,测试集分别为：
        pm1.a0302_train
        pm1.a0302_valid
        pm1.a0302_test_1611  -----   pm1.a0302_test_1710
*****************************************************************************;
</code></pre>

<h1>04.名义变量最优法降基</h1>
<pre><code>******************************************************************************;
*** 04名义变量最优法降基   ***; 
******************************************************************************;   

****名义变量最优法降基********************************************************;
/*调用宏程序*/
%let DSin   = pm1.a0302_train; /*输入数据集*/
%let DVVar  = target; /*因变量*/
%let Method = 4;  /*1.基尼方差；2.熵方差；3.皮尔森卡方统计量；4.信息值*/
%let Mmax   = 5;  /*最大分组数量*/

%let IVVar=IS_WORK_HR; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=PRODUCTCATEGORYNAME; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=GOODS_TYPE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=operatemode; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=province; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=city; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=pos_type; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=IS_SUIXINHUAN; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=INSURE_STATUS; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=INSURE_TYPE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=person_sex; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=FAMILY_STATE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=education; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=is_ssi; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=CERT_4_INITAL; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=house_type; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=person_sex; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=EMAIL; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=F_SAME_REG; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=IS_CERTID_PROVINCE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=RELATIVETYPE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=OTHER_PERSON_TYPE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=F_SAME_COM; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=MOST_CONTACT_3M; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);
%let IVVar=INNER_CODE; %let DSVarMap=pm1.a0401_&amp;IVVar._map; %ReduceCats(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;Mmax,&amp;DSVarMap);


/*查看名义变量分组结果*/
data var_list_char;
  input Var_Name $32.;
  cards;
IS_WORK_HR
PRODUCTCATEGORYNAME
GOODS_TYPE
OPERATEMODE 
PROVINCE 
CITY
POS_TYPE
IS_SUIXINHUAN  
INSURE_STATUS  
INSURE_TYPE 
PERSON_SEX 
FAMILY_STATE 
EDUCATION 
IS_SSI
CERT_4_INITAL   
HOUSE_TYPE 
EMAIL 
F_SAME_REG 
IS_CERTID_PROVINCE 
RELATIVETYPE 
OTHER_PERSON_TYPE
F_SAME_COM  
MOST_CONTACT_3M 
INNER_CODE
  ;
run;

data _null_;  
  set var_list_char;  
  call symput('varn'||left(put(_n_,4.)),compress(_n_));   
  call symput('name'||left(put(_n_,4.)),trim(Var_Name));   
run;  
%put &amp;=varn1 &amp;=name1; 
%put &amp;=varn2 &amp;=name2; 

proc sql; 
select count(Var_Name) into: varnum_count from var_list_char; 
quit;   

%macro var_char_group;
proc sql;  
create table pm1.a0402_var_char_group
(
  Var_Name  CHAR(32),
  Var_Value CHAR(60),
  total INTEGER,
  Bin   INTEGER,
  Category  CHAR(60)
);

%do i= 1 %to &amp;varnum_count.;
insert into pm1.a0402_var_char_group
select distinct &quot;&amp;&amp;name&amp;i.&quot; as VAR_NAME
   ,strip(&amp;&amp;name&amp;i.) as Var_Value
   ,total
   ,Bin
   ,strip(Category) as Category
from  pm1.a0401_&amp;&amp;name&amp;i.._map
;
%end;
quit;

%mend;
%var_char_group;

************************************************************;
*** 小结：本段代码在逻辑库 lf 中生成名义变量的分组表
    pm1.a0402_var_char_group
*** 及各名义变量的 map表
*************************************************************;
</code></pre>

<h1>05.连续变量最优法分割</h1>
<pre><code>******************************************************************************;
*** 5连续变量最优法分割***; 
******************************************************************************; 
/*调用宏程序*/
%let DSin   = pm1.a0302_train;
%let DVVar  = target;
%let Method = 4;
%let MMax   = 5;
%let Acc= 0.05;

%let IVVar=INTER3_COUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CHEXIAO_COUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=REJ_COUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=APR_COUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=APP_COUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=APR_CREDIT_AMOUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=APR_PAYMENT_NUM;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CREDIT_AMOUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=INIT_PAY;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYMENT_RATE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PERIODS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MIN_INIT_RATE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=EXTRA_INIT_RATE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MONTHLYINTERESTRATE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MANAGEMENTFEESRATE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CUSTOMERSERVICERATES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=SALESCOMMISSION;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=EFFECTIVEANNUALRATE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PRICE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CERTF_INTERVAL_YEARS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=JOBTIME;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
/*%let IVVar=LAST3YEAR_WORKCHANGE_NUM;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);*/
%let IVVar=EXPENSE_MONTH;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=OTHER_INCOME;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=SELF_INCOME;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=FAMILY_INCOME;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CHILDRENTOTAL;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=QQNO_INIT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=QQ_LENGTH;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYPRINCIPLE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYFEE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYPRINCIPALNFEE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYINTEAMT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYFINE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAYFINECNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DUE_PERIODS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ACTUALPAYPRINCIPLE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ACTUALPAYFEE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ACTUALPAYPRINCIPALNFEE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ACTUALPAYINTEAMT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ACTUALPAYFINE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ACTUALPAYFINECNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=FINISH_PERIODS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PAY_PERIODS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=SEQ_DELAY_DAYS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ONTIME_PAY;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=INTIME_PAY;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=TOT_CREDIT_AMOUNT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DELAY_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DELAY_DAYS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=AVG_DAYS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_CPD;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_OVERDUE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ROLL_BACK;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_ROLL_SEQ;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=ROLL_BACK_SEQ;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_CONDUE1;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CON1_DUE_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_CONDUE5;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CON5_DUE_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_CONDUE10;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CON10_DUE_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=HIS_DUESEQ;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=IS10FINE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=SEQ_DUEDAYS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=MAX_SEQ_DUEDAYS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=OVER_DUE_VALUE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=N_CUR_BALANCE;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=AVG_ROLLSEQ;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=FINE10_SEQ_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=VALUE_INCOME_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=VALUE_BALANCE_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=OVERDUE_PERIODS_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=FINISH_PERIODS_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DUE_PERIODS_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CS_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CONTACT;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=PTP;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=FNBM_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=INCM_TIMES;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=HIS_PTPDAYS;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CONLOST;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=LOST;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=RECENT_CONTACT_DAY;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=KPTP;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=BPTP;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=KPTP_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=BPTP_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=CSFQ;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DUE_DELAY_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DUE_CSTIME_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DUE_CONTACT_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=DUE_PTP_RATIO;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);
%let IVVar=TOTAL_WK_EXP;%let DSVarMap=pm1.a0501_&amp;IVVar._map; %BinContVar(&amp;DSin,&amp;IVVar,&amp;DVVar,&amp;Method,&amp;MMax,&amp;Acc,&amp;DSVarMap);


/*查看连续变量分组结果*/
data var_list_cont;
  input Var_Name $32.;
  cards;
INTER3_COUNT
CHEXIAO_COUNT
REJ_COUNT
APR_COUNT
APP_COUNT
APR_CREDIT_AMOUNT
APR_PAYMENT_NUM
CREDIT_AMOUNT
INIT_PAY
PAYMENT_RATE
PERIODS
MIN_INIT_RATE
EXTRA_INIT_RATE
MONTHLYINTERESTRATE
MANAGEMENTFEESRATE
CUSTOMERSERVICERATES
SALESCOMMISSION
EFFECTIVEANNUALRATE
PRICE
CERTF_INTERVAL_YEARS
JOBTIME
EXPENSE_MONTH
OTHER_INCOME
SELF_INCOME
FAMILY_INCOME
CHILDRENTOTAL
QQNO_INIT
QQ_LENGTH
PAYPRINCIPLE
PAYFEE
PAYPRINCIPALNFEE
PAYINTEAMT
PAYFINE
PAYFINECNT
DUE_PERIODS
ACTUALPAYPRINCIPLE
ACTUALPAYFEE
ACTUALPAYPRINCIPALNFEE
ACTUALPAYINTEAMT
ACTUALPAYFINE
ACTUALPAYFINECNT
FINISH_PERIODS
PAY_PERIODS
SEQ_DELAY_DAYS
ONTIME_PAY
INTIME_PAY
CREDIT_AMOUNT
TOT_CREDIT_AMOUNT
DELAY_TIMES
DELAY_DAYS
AVG_DAYS
MAX_CPD
MAX_OVERDUE
ROLL_BACK
MAX_ROLL_SEQ
ROLL_BACK_SEQ
MAX_CONDUE1
CON1_DUE_TIMES
MAX_CONDUE5
CON5_DUE_TIMES
MAX_CONDUE10
CON10_DUE_TIMES
HIS_DUESEQ
IS10FINE
SEQ_DUEDAYS
MAX_SEQ_DUEDAYS
OVER_DUE_VALUE
N_CUR_BALANCE
AVG_ROLLSEQ
FINE10_SEQ_RATIO
VALUE_INCOME_RATIO
VALUE_BALANCE_RATIO
OVERDUE_PERIODS_RATIO
FINISH_PERIODS_RATIO
DUE_PERIODS_RATIO
CS_TIMES
CONTACT
PTP
FNBM_TIMES
INCM_TIMES
HIS_PTPDAYS
CONLOST
LOST
RECENT_CONTACT_DAY
KPTP
BPTP
KPTP_RATIO
BPTP_RATIO
CSFQ
DUE_DELAY_RATIO
DUE_CSTIME_RATIO
DUE_CONTACT_RATIO
DUE_PTP_RATIO
  ;
run;

data _null_;  
  set var_list_cont;  
  call symput('varn'||left(put(_n_,4.)),compress(_n_));   
  call symput('name'||left(put(_n_,4.)),trim(Var_Name));   
run;  
%put &amp;=varn1 &amp;=name1; 
%put &amp;=varn2 &amp;=name2; 

proc sql; 
select count(Var_Name) into: varnum_count from var_list_cont; 
quit;   

%macro var_num_group;
proc sql;  
create table pm1.a0502_var_num_group
(
  Var_Name  CHAR(32),
  LLDECIMAL(8,4),
  ULDECIMAL(8,4),
  BinTotal  INTEGER,
  Bin   INTEGER
);

%do i= 1 %to &amp;varnum_count.;
insert into pm1.a0502_var_num_group
select distinct &quot;&amp;&amp;name&amp;i.&quot; as VAR_NAME, *
from  pm1.a0501_&amp;&amp;name&amp;i.._map
;
%end;
quit;

%mend;
%var_num_group;
</code></pre>

<h1>06.分组映射</h1>
<pre><code>******************************************************************************;
*** 06分组映射 ***; 
******************************************************************************; 

****Train********************************************************************;
/*名义变量分组映射*/
data pm1.a0601_train_group; set pm1.a0302_train; run;

%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=IS_WORK_HR; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=PRODUCTCATEGORYNAME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=GOODS_TYPE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=operatemode ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=province ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=city; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=pos_type; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=IS_SUIXINHUAN; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=INSURE_STATUS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=INSURE_TYPE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=person_sex ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=FAMILY_STATE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=education; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=is_ssi; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=CERT_4_INITAL; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=house_type ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=EMAIL ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=F_SAME_REG ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=IS_CERTID_PROVINCE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=RELATIVETYPE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=OTHER_PERSON_TYPE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=F_SAME_COM; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MOST_CONTACT_3M; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=INNER_CODE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);

proc sql;
    select distinct education,education_b from pm1.a0601_train_group;
run;

/*data pm1.a0601_train_group;*/
/*  set pm1.a0601_train_group;*/
/*run;*/

/*连续变量分组映射*/
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=INTER3_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CHEXIAO_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=REJ_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=APR_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=APP_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=APR_CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=APR_PAYMENT_NUM; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=INIT_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=PAYMENT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=MIN_INIT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=EXTRA_INIT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=MONTHLYINTERESTRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MANAGEMENTFEESRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CUSTOMERSERVICERATES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=SALESCOMMISSION; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=EFFECTIVEANNUALRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=PRICE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CERTF_INTERVAL_YEARS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=JOBTIME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=EXPENSE_MONTH; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=OTHER_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=SELF_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=FAMILY_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CHILDRENTOTAL; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=QQNO_INIT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=QQ_LENGTH; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=PAYPRINCIPLE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=PAYFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=PAYPRINCIPALNFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=PAYINTEAMT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=PAYFINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=PAYFINECNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=DUE_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=ACTUALPAYPRINCIPLE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=ACTUALPAYFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=ACTUALPAYPRINCIPALNFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=ACTUALPAYINTEAMT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=ACTUALPAYFINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=ACTUALPAYFINECNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=FINISH_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=PAY_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=SEQ_DELAY_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=ONTIME_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=INTIME_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=CREDIT_AMOUNT ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=TOT_CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=DELAY_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=DELAY_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=AVG_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=MAX_CPD; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MAX_OVERDUE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=ROLL_BACK; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MAX_ROLL_SEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=ROLL_BACK_SEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MAX_CONDUE1; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CON1_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MAX_CONDUE5; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CON5_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=MAX_CONDUE10; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CON10_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=HIS_DUESEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=IS10FINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=SEQ_DUEDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=MAX_SEQ_DUEDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=OVER_DUE_VALUE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=N_CUR_BALANCE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=AVG_ROLLSEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=FINE10_SEQ_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=VALUE_INCOME_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=VALUE_BALANCE_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=OVERDUE_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=FINISH_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=DUE_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CS_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=CONTACT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=PTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=FNBM_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=INCM_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
/*%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=HIS_PTPDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);*/
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=CONLOST; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=LOST; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=RECENT_CONTACT_DAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=KPTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=BPTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=KPTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=BPTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=CSFQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=DUE_DELAY_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=DUE_CSTIME_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=DUE_CONTACT_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group ; %let DSout=pm1.a0601_train_group;%let VarX=DUE_PTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0601_train_group; %let DSout=pm1.a0601_train_group ;%let VarX=TOTAL_WK_EXP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);


****Valid********************************************************************;
/*名义变量分组映射*/
data pm1.a0602_valid_group; set pm1.a0302_valid; run;

%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=IS_WORK_HR; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=PRODUCTCATEGORYNAME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=GOODS_TYPE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=operatemode ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=province ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=city; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=pos_type; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=IS_SUIXINHUAN; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=INSURE_STATUS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=INSURE_TYPE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=person_sex ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=FAMILY_STATE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=education; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=is_ssi; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=CERT_4_INITAL; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=house_type ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=EMAIL ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=F_SAME_REG ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=IS_CERTID_PROVINCE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=RELATIVETYPE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=OTHER_PERSON_TYPE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=F_SAME_COM; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MOST_CONTACT_3M; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=INNER_CODE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);

proc sql;
    select distinct education,education_b from pm1.a0602_valid_group;
run;

/*连续变量分组映射*/
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=INTER3_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CHEXIAO_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=REJ_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=APR_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=APP_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=APR_CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=APR_PAYMENT_NUM; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=INIT_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=PAYMENT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=MIN_INIT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=EXTRA_INIT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=MONTHLYINTERESTRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MANAGEMENTFEESRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CUSTOMERSERVICERATES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=SALESCOMMISSION; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=EFFECTIVEANNUALRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=PRICE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CERTF_INTERVAL_YEARS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=JOBTIME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=EXPENSE_MONTH; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=OTHER_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=SELF_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=FAMILY_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CHILDRENTOTAL; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=QQNO_INIT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=QQ_LENGTH; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=PAYPRINCIPLE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=PAYFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=PAYPRINCIPALNFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=PAYINTEAMT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=PAYFINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=PAYFINECNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=DUE_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=ACTUALPAYPRINCIPLE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=ACTUALPAYFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=ACTUALPAYPRINCIPALNFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=ACTUALPAYINTEAMT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=ACTUALPAYFINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=ACTUALPAYFINECNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=FINISH_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=PAY_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=SEQ_DELAY_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=ONTIME_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=INTIME_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=CREDIT_AMOUNT ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=TOT_CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=DELAY_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=DELAY_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=AVG_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=MAX_CPD; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MAX_OVERDUE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=ROLL_BACK; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MAX_ROLL_SEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=ROLL_BACK_SEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MAX_CONDUE1; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CON1_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MAX_CONDUE5; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CON5_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=MAX_CONDUE10; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CON10_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=HIS_DUESEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=IS10FINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=SEQ_DUEDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=MAX_SEQ_DUEDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=OVER_DUE_VALUE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=N_CUR_BALANCE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=AVG_ROLLSEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=FINE10_SEQ_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=VALUE_INCOME_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=VALUE_BALANCE_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=OVERDUE_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=FINISH_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=DUE_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CS_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=CONTACT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=PTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=FNBM_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=INCM_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
/*%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=HIS_PTPDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);*/
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=CONLOST; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=LOST; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=RECENT_CONTACT_DAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=KPTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=BPTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=KPTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=BPTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=CSFQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=DUE_DELAY_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=DUE_CSTIME_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=DUE_CONTACT_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group ; %let DSout=pm1.a0602_valid_group;%let VarX=DUE_PTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0602_valid_group; %let DSout=pm1.a0602_valid_group ;%let VarX=TOTAL_WK_EXP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);



****Test********************************************************************;
/*名义变量分组映射*/

data pm1.a0603_test_group; set pm1.a0302_test; run;

%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=IS_WORK_HR; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=PRODUCTCATEGORYNAME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=GOODS_TYPE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=operatemode ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=province ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=city; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=pos_type; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=IS_SUIXINHUAN; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=INSURE_STATUS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=INSURE_TYPE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=person_sex ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=FAMILY_STATE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=education; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=is_ssi; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=CERT_4_INITAL; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=house_type ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=EMAIL ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=F_SAME_REG ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=IS_CERTID_PROVINCE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=RELATIVETYPE ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=OTHER_PERSON_TYPE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=F_SAME_COM; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MOST_CONTACT_3M; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=INNER_CODE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0401_&amp;VarX._map; %ApplyMap1(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);

proc sql;
    select distinct education,education_b from pm1.a0603_test_group;
run;


/*连续变量分组映射*/
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=INTER3_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CHEXIAO_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=REJ_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=APR_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=APP_COUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=APR_CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=APR_PAYMENT_NUM; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=INIT_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=PAYMENT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=MIN_INIT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=EXTRA_INIT_RATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=MONTHLYINTERESTRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MANAGEMENTFEESRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CUSTOMERSERVICERATES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=SALESCOMMISSION; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=EFFECTIVEANNUALRATE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=PRICE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CERTF_INTERVAL_YEARS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=JOBTIME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=EXPENSE_MONTH; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=OTHER_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=SELF_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=FAMILY_INCOME; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CHILDRENTOTAL; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=QQNO_INIT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=QQ_LENGTH; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=PAYPRINCIPLE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=PAYFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=PAYPRINCIPALNFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=PAYINTEAMT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=PAYFINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=PAYFINECNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=DUE_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=ACTUALPAYPRINCIPLE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=ACTUALPAYFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=ACTUALPAYPRINCIPALNFEE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=ACTUALPAYINTEAMT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=ACTUALPAYFINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=ACTUALPAYFINECNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=FINISH_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=PAY_PERIODS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=SEQ_DELAY_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=ONTIME_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=INTIME_PAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=CREDIT_AMOUNT ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=TOT_CREDIT_AMOUNT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=DELAY_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=DELAY_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=AVG_DAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=MAX_CPD; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MAX_OVERDUE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=ROLL_BACK; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MAX_ROLL_SEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=ROLL_BACK_SEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MAX_CONDUE1; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CON1_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MAX_CONDUE5; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CON5_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=MAX_CONDUE10; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CON10_DUE_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=HIS_DUESEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=IS10FINE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=SEQ_DUEDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=MAX_SEQ_DUEDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=OVER_DUE_VALUE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=N_CUR_BALANCE; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=AVG_ROLLSEQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=FINE10_SEQ_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=VALUE_INCOME_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=VALUE_BALANCE_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=OVERDUE_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=FINISH_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=DUE_PERIODS_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CS_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=CONTACT; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=PTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=FNBM_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=INCM_TIMES; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
/*%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=HIS_PTPDAYS; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);*/
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=CONLOST; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=LOST; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=RECENT_CONTACT_DAY; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=KPTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=BPTP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=KPTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=BPTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=CSFQ; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=DUE_DELAY_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=DUE_CSTIME_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=DUE_CONTACT_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group ; %let DSout=pm1.a0603_test_group;%let VarX=DUE_PTP_RATIO; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
%let DSin=pm1.a0603_test_group; %let DSout=pm1.a0603_test_group ;%let VarX=TOTAL_WK_EXP; %let NewVarX=&amp;VarX._b; %let DSVarMap=pm1.a0501_&amp;VarX._map; %ApplyMap2(&amp;DSin,&amp;VarX,&amp;NewVarX,&amp;DSVarMap,&amp;DSout);
</code></pre>

<h1>07.变量woe计算与映射</h1>
<pre><code>******************************************************************************;
*** 07变量woe计算与映射***; 
******************************************************************************;   

****WOE Calculation on Train*************************************************;
data pm1.a0701_train_woe; set pm1.a0601_train_group; run;

/*调用宏程序*/
%let dvvar=target;
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=IS_WORK_HR; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PRODUCTCATEGORYNAME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=GOODS_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=OPERATEMODE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PROVINCE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=CITY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=POS_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=IS_SUIXINHUAN  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=INSURE_STATUS  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=INSURE_TYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PERSON_SEX ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=FAMILY_STATE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=EDUCATION ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=IS_SSI; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=CERT_4_INITAL   ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=HOUSE_TYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=EMAIL ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=F_SAME_REG ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=IS_CERTID_PROVINCE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=RELATIVETYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=OTHER_PERSON_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=F_SAME_COM  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MOST_CONTACT_3M ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=INNER_CODE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);

%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=INTER3_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=CHEXIAO_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=REJ_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=APR_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=APP_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=APR_CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=APR_PAYMENT_NUM; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=INIT_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=PAYMENT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=MIN_INIT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=EXTRA_INIT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=MONTHLYINTERESTRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MANAGEMENTFEESRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CUSTOMERSERVICERATES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=SALESCOMMISSION; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=EFFECTIVEANNUALRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PRICE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CERTF_INTERVAL_YEARS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=JOBTIME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=EXPENSE_MONTH; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=OTHER_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=SELF_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=FAMILY_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CHILDRENTOTAL; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=QQNO_INIT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=QQ_LENGTH; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PAYPRINCIPLE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=PAYFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PAYPRINCIPALNFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=PAYINTEAMT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PAYFINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=PAYFINECNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=DUE_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=ACTUALPAYPRINCIPLE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=ACTUALPAYFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=ACTUALPAYPRINCIPALNFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=ACTUALPAYINTEAMT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=ACTUALPAYFINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=ACTUALPAYFINECNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=FINISH_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=PAY_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=SEQ_DELAY_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=ONTIME_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=INTIME_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=TOT_CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=DELAY_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=DELAY_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=AVG_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=MAX_CPD; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MAX_OVERDUE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=ROLL_BACK; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MAX_ROLL_SEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=ROLL_BACK_SEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MAX_CONDUE1; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CON1_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MAX_CONDUE5; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CON5_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=MAX_CONDUE10; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CON10_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=HIS_DUESEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=IS10FINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=SEQ_DUEDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=MAX_SEQ_DUEDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=OVER_DUE_VALUE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=N_CUR_BALANCE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=AVG_ROLLSEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=FINE10_SEQ_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=VALUE_INCOME_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=VALUE_BALANCE_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=OVERDUE_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=FINISH_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=DUE_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CS_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=CONTACT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=PTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=FNBM_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=INCM_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
/*%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=HIS_PTPDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);*/
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=CONLOST; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=LOST; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=RECENT_CONTACT_DAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=KPTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=BPTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=KPTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=BPTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=CSFQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=DUE_DELAY_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=DUE_CSTIME_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=DUE_CONTACT_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe ; %let DSout=pm1.a0701_train_woe; %let var=DUE_PTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0701_train_woe  ; %let DSout=pm1.a0701_train_woe; %let var=TOTAL_WK_EXP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);

/**/
/*data pm1.a0701_train_woe;*/
/*  set pm1.a0701_train_woe;*/
/*run;*/


/*WOE结果汇总*/
proc sql;
create table varlist as
select a.varnum, a.name, a.type, a.length, a.label, a.format, a.npos, b.nobs
from dictionary.columns as a , dictionary.tables as b
where a.libname=%upcase(&quot;lf&quot;) and 
  b.libname=%upcase(&quot;lf&quot;) and
  a.memname=%upcase(&quot;a0701_train_woe&quot;) and  
  b.memname=%upcase(&quot;a0701_train_woe&quot;) and 
  substr(a.name,length(a.name)-3,4)=&quot;_woe&quot; order by varnum;   
quit;

data _null_;  
  set varlist;  
  call symput('varn'||left(put(_n_,4.)),compress(varnum));   
  call symput('name'||left(put(_n_,4.)),substr(trim(name),1,length(trim(name))-4));   
run;  
%put &amp;=varn1 &amp;=name1; 
%put &amp;=varn2 &amp;=name2; 

proc sql; 
select count(varnum) into: varnum_count from varlist; 
quit;   

%macro woe_summary;
proc sql;  
create table pm1.a0702_woe_summary
(
  VAR_NAME  CHAR(32),
  bin   INTEGER,
  WOE   num
);

%do i= 1 %to &amp;varnum_count.;
insert into pm1.a0702_woe_summary
select distinct &quot;&amp;&amp;name&amp;i.&quot; as VAR_NAME
   ,&amp;&amp;name&amp;i.._b as bin
   ,WOE
from  pm1.a0701_&amp;&amp;name&amp;i.._woe;
%end;
quit;
%mend;
%woe_summary;




****WOE Calculation on Valid*************************************************;
data pm1.a0702_valid_woe; set pm1.a0602_valid_group; run;

/*调用宏程序*/
%let dvvar=target;
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=IS_WORK_HR; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PRODUCTCATEGORYNAME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=GOODS_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=OPERATEMODE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PROVINCE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=CITY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=POS_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=IS_SUIXINHUAN  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=INSURE_STATUS  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=INSURE_TYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PERSON_SEX ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=FAMILY_STATE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=EDUCATION ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=IS_SSI; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=CERT_4_INITAL   ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=HOUSE_TYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=EMAIL ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=F_SAME_REG ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=IS_CERTID_PROVINCE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=RELATIVETYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=OTHER_PERSON_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=F_SAME_COM  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MOST_CONTACT_3M ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=INNER_CODE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=INTER3_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=CHEXIAO_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=REJ_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=APR_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=APP_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=APR_CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=APR_PAYMENT_NUM; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=INIT_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=PAYMENT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=MIN_INIT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=EXTRA_INIT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=MONTHLYINTERESTRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MANAGEMENTFEESRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CUSTOMERSERVICERATES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=SALESCOMMISSION; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=EFFECTIVEANNUALRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PRICE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CERTF_INTERVAL_YEARS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=JOBTIME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=EXPENSE_MONTH; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=OTHER_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=SELF_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=FAMILY_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CHILDRENTOTAL; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=QQNO_INIT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=QQ_LENGTH; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PAYPRINCIPLE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=PAYFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PAYPRINCIPALNFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=PAYINTEAMT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PAYFINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=PAYFINECNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=DUE_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=ACTUALPAYPRINCIPLE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=ACTUALPAYFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=ACTUALPAYPRINCIPALNFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=ACTUALPAYINTEAMT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=ACTUALPAYFINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=ACTUALPAYFINECNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=FINISH_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=PAY_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=SEQ_DELAY_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=ONTIME_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=INTIME_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=TOT_CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=DELAY_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=DELAY_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=AVG_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_CPD; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_OVERDUE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=ROLL_BACK; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_ROLL_SEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=ROLL_BACK_SEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_CONDUE1; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CON1_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_CONDUE5; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CON5_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_CONDUE10; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CON10_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=HIS_DUESEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=IS10FINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=SEQ_DUEDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=MAX_SEQ_DUEDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=OVER_DUE_VALUE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=N_CUR_BALANCE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=AVG_ROLLSEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=FINE10_SEQ_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=VALUE_INCOME_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=VALUE_BALANCE_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=OVERDUE_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=FINISH_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=DUE_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CS_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=CONTACT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=PTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=FNBM_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=INCM_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
/*%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=HIS_PTPDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);*/
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=CONLOST; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=LOST; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=RECENT_CONTACT_DAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=KPTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=BPTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=KPTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=BPTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=CSFQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=DUE_DELAY_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=DUE_CSTIME_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=DUE_CONTACT_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe ; %let DSout=pm1.a0702_valid_woe; %let var=DUE_PTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0702_valid_woe  ; %let DSout=pm1.a0702_valid_woe; %let var=TOTAL_WK_EXP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);




****WOE Calculation on Test*************************************************;
data pm1.a0703_test_woe; set pm1.a0603_test_group; run;

/*调用宏程序*/
%let dvvar=target;
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=IS_WORK_HR; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PRODUCTCATEGORYNAME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=GOODS_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=OPERATEMODE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PROVINCE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=CITY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=POS_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=IS_SUIXINHUAN  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=INSURE_STATUS  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=INSURE_TYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PERSON_SEX ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=FAMILY_STATE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=EDUCATION ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=IS_SSI; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=CERT_4_INITAL   ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=HOUSE_TYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=EMAIL ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=F_SAME_REG ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=IS_CERTID_PROVINCE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=RELATIVETYPE ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=OTHER_PERSON_TYPE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=F_SAME_COM  ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MOST_CONTACT_3M ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=INNER_CODE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=INTER3_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=CHEXIAO_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=REJ_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=APR_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=APP_COUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=APR_CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=APR_PAYMENT_NUM; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=INIT_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=PAYMENT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=MIN_INIT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=EXTRA_INIT_RATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=MONTHLYINTERESTRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MANAGEMENTFEESRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CUSTOMERSERVICERATES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=SALESCOMMISSION; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=EFFECTIVEANNUALRATE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&ampamp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PRICE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CERTF_INTERVAL_YEARS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=JOBTIME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=EXPENSE_MONTH; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=OTHER_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=SELF_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=FAMILY_INCOME; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CHILDRENTOTAL; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=QQNO_INIT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=QQ_LENGTH; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PAYPRINCIPLE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=PAYFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PAYPRINCIPALNFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=PAYINTEAMT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PAYFINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=PAYFINECNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=DUE_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=ACTUALPAYPRINCIPLE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=ACTUALPAYFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=ACTUALPAYPRINCIPALNFEE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=ACTUALPAYINTEAMT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=ACTUALPAYFINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=ACTUALPAYFINECNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=FINISH_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=PAY_PERIODS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=SEQ_DELAY_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=ONTIME_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=INTIME_PAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=TOT_CREDIT_AMOUNT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=DELAY_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=DELAY_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=AVG_DAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=MAX_CPD; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MAX_OVERDUE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=ROLL_BACK; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MAX_ROLL_SEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=ROLL_BACK_SEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MAX_CONDUE1; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CON1_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MAX_CONDUE5; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CON5_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=MAX_CONDUE10; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CON10_DUE_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=HIS_DUESEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=IS10FINE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=SEQ_DUEDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=MAX_SEQ_DUEDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=OVER_DUE_VALUE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=N_CUR_BALANCE; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=AVG_ROLLSEQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=FINE10_SEQ_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=VALUE_INCOME_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=VALUE_BALANCE_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=OVERDUE_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=FINISH_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=DUE_PERIODS_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CS_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=CONTACT; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=PTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=FNBM_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=INCM_TIMES; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
/*%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=HIS_PTPDAYS; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);*/
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=CONLOST; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=LOST; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=RECENT_CONTACT_DAY; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=KPTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=BPTP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=KPTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=BPTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=CSFQ; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=DUE_DELAY_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=DUE_CSTIME_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=DUE_CONTACT_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe ; %let DSout=pm1.a0703_test_woe; %let var=DUE_PTP_RATIO; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
%let DSin=pm1.a0703_test_woe  ; %let DSout=pm1.a0703_test_woe; %let var=TOTAL_WK_EXP; %let ivvar=&amp;var._b; %let woeds=pm1.a0701_&amp;var._woe; %let WOEVar=&amp;var._woe; %CalcWOE(&amp;DsIn,&amp;IVVar,&amp;DVVar,&amp;WOEDS,&amp;WOEVar,&amp;DSout);
</code></pre>

<h1>08.计算IV值</h1>
<pre><code>******************************************************************************;
*** 08计算IV值 ***; 
******************************************************************************; 

/*将数值型分组转化为字符型*/
data pm1.a0801_train_bin_ch;
  set pm1.a0701_train_woe;
    is_work_hr_b_ch  =put(is_work_hr_b,  8.);
    productcategoryname_b_ch  =put(productcategoryname_b,  8.);
    goods_type_b_ch  =put(goods_type_b,  8.);
    operatemode_b_ch  =put(operatemode_b,  8.);
    province_b_ch  =put(province_b,  8.);
    city_b_ch  =put(city_b,  8.);
    pos_type_b_ch  =put(pos_type_b,  8.);
    is_suixinhuan_b_ch  =put(is_suixinhuan_b,  8.);
    insure_status_b_ch  =put(insure_status_b,  8.);
    insure_type_b_ch  =put(insure_type_b,  8.);
    person_sex_b_ch  =put(person_sex_b,  8.);
    family_state_b_ch  =put(family_state_b,  8.);
    education_b_ch  =put(education_b,  8.);
    is_ssi_b_ch  =put(is_ssi_b,  8.);
    cert_4_inital_b_ch  =put(cert_4_inital_b,  8.);
    house_type_b_ch  =put(house_type_b,  8.);
    email_b_ch  =put(email_b,  8.);
    f_same_reg_b_ch  =put(f_same_reg_b,  8.);
    is_certid_province_b_ch  =put(is_certid_province_b,  8.);
    relativetype_b_ch  =put(relativetype_b,  8.);
    other_person_type_b_ch  =put(other_person_type_b,  8.);
    f_same_com_b_ch  =put(f_same_com_b,  8.);
    most_contact_3m_b_ch  =put(most_contact_3m_b,  8.);
    inner_code_b_ch  =put(inner_code_b,  8.);
    inter3_count_b_ch  =put(inter3_count_b,  8.);
    chexiao_count_b_ch  =put(chexiao_count_b,  8.);
    rej_count_b_ch  =put(rej_count_b,  8.);
    apr_count_b_ch  =put(apr_count_b,  8.);
    app_count_b_ch  =put(app_count_b,  8.);
    apr_credit_amount_b_ch  =put(apr_credit_amount_b,  8.);
    apr_payment_num_b_ch  =put(apr_payment_num_b,  8.);
    credit_amount_b_ch  =put(credit_amount_b,  8.);
    init_pay_b_ch  =put(init_pay_b,  8.);
    payment_rate_b_ch  =put(payment_rate_b,  8.);
    periods_b_ch  =put(periods_b,  8.);
    min_init_rate_b_ch  =put(min_init_rate_b,  8.);
    extra_init_rate_b_ch  =put(extra_init_rate_b,  8.);
    monthlyinterestrate_b_ch  =put(monthlyinterestrate_b,  8.);
    managementfeesrate_b_ch  =put(managementfeesrate_b,  8.);
    customerservicerates_b_ch  =put(customerservicerates_b,  8.);
    salescommission_b_ch  =put(salescommission_b,  8.);
    effectiveannualrate_b_ch  =put(effectiveannualrate_b,  8.);
    price_b_ch  =put(price_b,  8.);
    certf_interval_years_b_ch  =put(certf_interval_years_b,  8.);
    jobtime_b_ch  =put(jobtime_b,  8.);
    expense_month_b_ch  =put(expense_month_b,  8.);
    other_income_b_ch  =put(other_income_b,  8.);
    self_income_b_ch  =put(self_income_b,  8.);
    family_income_b_ch  =put(family_income_b,  8.);
    childrentotal_b_ch  =put(childrentotal_b,  8.);
    qqno_init_b_ch  =put(qqno_init_b,  8.);
    qq_length_b_ch  =put(qq_length_b,  8.);
    payprinciple_b_ch  =put(payprinciple_b,  8.);
    payfee_b_ch  =put(payfee_b,  8.);
    payprincipalnfee_b_ch  =put(payprincipalnfee_b,  8.);
    payinteamt_b_ch  =put(payinteamt_b,  8.);
    payfine_b_ch  =put(payfine_b,  8.);
    payfinecnt_b_ch  =put(payfinecnt_b,  8.);
    due_periods_b_ch  =put(due_periods_b,  8.);
    actualpayprinciple_b_ch  =put(actualpayprinciple_b,  8.);
    actualpayfee_b_ch  =put(actualpayfee_b,  8.);
    actualpayprincipalnfee_b_ch  =put(actualpayprincipalnfee_b,  8.);
    actualpayinteamt_b_ch  =put(actualpayinteamt_b,  8.);
    actualpayfine_b_ch  =put(actualpayfine_b,  8.);
    actualpayfinecnt_b_ch  =put(actualpayfinecnt_b,  8.);
    finish_periods_b_ch  =put(finish_periods_b,  8.);
    pay_periods_b_ch  =put(pay_periods_b,  8.);
    seq_delay_days_b_ch  =put(seq_delay_days_b,  8.);
    ontime_pay_b_ch  =put(ontime_pay_b,  8.);
    intime_pay_b_ch  =put(intime_pay_b,  8.);
    credit_amount_b_ch  =put(credit_amount_b,  8.);
    tot_credit_amount_b_ch  =put(tot_credit_amount_b,  8.);
    delay_times_b_ch  =put(delay_times_b,  8.);
    delay_days_b_ch  =put(delay_days_b,  8.);
    avg_days_b_ch  =put(avg_days_b,  8.);
    max_cpd_b_ch  =put(max_cpd_b,  8.);
    max_overdue_b_ch  =put(max_overdue_b,  8.);
    roll_back_b_ch  =put(roll_back_b,  8.);
    max_roll_seq_b_ch  =put(max_roll_seq_b,  8.);
    roll_back_seq_b_ch  =put(roll_back_seq_b,  8.);
    max_condue1_b_ch  =put(max_condue1_b,  8.);
    con1_due_times_b_ch  =put(con1_due_times_b,  8.);
    max_condue5_b_ch  =put(max_condue5_b,  8.);
    con5_due_times_b_ch  =put(con5_due_times_b,  8.);
    max_condue10_b_ch  =put(max_condue10_b,  8.);
    con10_due_times_b_ch  =put(con10_due_times_b,  8.);
    his_dueseq_b_ch  =put(his_dueseq_b,  8.);
    is10fine_b_ch  =put(is10fine_b,  8.);
    seq_duedays_b_ch  =put(seq_duedays_b,  8.);
    max_seq_duedays_b_ch  =put(max_seq_duedays_b,  8.);
    over_due_value_b_ch  =put(over_due_value_b,  8.);
    n_cur_balance_b_ch  =put(n_cur_balance_b,  8.);
    avg_rollseq_b_ch  =put(avg_rollseq_b,  8.);
    fine10_seq_ratio_b_ch  =put(fine10_seq_ratio_b,  8.);
    value_income_ratio_b_ch  =put(value_income_ratio_b,  8.);
    value_balance_ratio_b_ch  =put(value_balance_ratio_b,  8.);
    overdue_periods_ratio_b_ch  =put(overdue_periods_ratio_b,  8.);
    finish_periods_ratio_b_ch  =put(finish_periods_ratio_b,  8.);
    due_periods_ratio_b_ch  =put(due_periods_ratio_b,  8.);
    cs_times_b_ch  =put(cs_times_b,  8.);
    contact_b_ch  =put(contact_b,  8.);
    ptp_b_ch  =put(ptp_b,  8.);
    fnbm_times_b_ch  =put(fnbm_times_b,  8.);
    incm_times_b_ch  =put(incm_times_b,  8.);
    his_ptpdays_b_ch  =put(his_ptpdays_b,  8.);
    conlost_b_ch  =put(conlost_b,  8.);
    lost_b_ch  =put(lost_b,  8.);
    recent_contact_day_b_ch  =put(recent_contact_day_b,  8.);
    kptp_b_ch  =put(kptp_b,  8.);
    bptp_b_ch  =put(bptp_b,  8.);
    kptp_ratio_b_ch  =put(kptp_ratio_b,  8.);
    bptp_ratio_b_ch  =put(bptp_ratio_b,  8.);
    csfq_b_ch  =put(csfq_b,  8.);
    due_delay_ratio_b_ch  =put(due_delay_ratio_b,  8.);
    due_cstime_ratio_b_ch  =put(due_cstime_ratio_b,  8.);
    due_contact_ratio_b_ch  =put(due_contact_ratio_b,  8.);
    due_ptp_ratio_b_ch  =put(due_ptp_ratio_b,  8.);
    total_wk_exp_b_ch  =put(total_wk_exp_b,  8.);
run;


%let IVList=
    is_work_hr_b_ch
    productcategoryname_b_ch
    goods_type_b_ch
    operatemode_b_ch
    province_b_ch
    city_b_ch
    pos_type_b_ch
    is_suixinhuan_b_ch
    insure_status_b_ch
    insure_type_b_ch
    person_sex_b_ch
    family_state_b_ch
    education_b_ch
    is_ssi_b_ch
    cert_4_inital_b_ch
    house_type_b_ch
    email_b_ch
    f_same_reg_b_ch
    is_certid_province_b_ch
    relativetype_b_ch
    other_person_type_b_ch
    f_same_com_b_ch
    most_contact_3m_b_ch
    inner_code_b_ch
    inter3_count_b_ch
    chexiao_count_b_ch
    rej_count_b_ch
    apr_count_b_ch
    app_count_b_ch
    apr_credit_amount_b_ch
    apr_payment_num_b_ch
    credit_amount_b_ch
    init_pay_b_ch
    payment_rate_b_ch
    periods_b_ch
    min_init_rate_b_ch
    extra_init_rate_b_ch
    monthlyinterestrate_b_ch
    managementfeesrate_b_ch
    customerservicerates_b_ch
    salescommission_b_ch
    effectiveannualrate_b_ch
    price_b_ch
    certf_interval_years_b_ch
    jobtime_b_ch
    expense_month_b_ch
    other_income_b_ch
    self_income_b_ch
    family_income_b_ch
    childrentotal_b_ch
    qqno_init_b_ch
    qq_length_b_ch
    payprinciple_b_ch
    payfee_b_ch
    payprincipalnfee_b_ch
    payinteamt_b_ch
    payfine_b_ch
    payfinecnt_b_ch
    due_periods_b_ch
    actualpayprinciple_b_ch
    actualpayfee_b_ch
    actualpayprincipalnfee_b_ch
    actualpayinteamt_b_ch
    actualpayfine_b_ch
    actualpayfinecnt_b_ch
    finish_periods_b_ch
    pay_periods_b_ch
    seq_delay_days_b_ch
    ontime_pay_b_ch
    intime_pay_b_ch
    credit_amount_b_ch
    tot_credit_amount_b_ch
    delay_times_b_ch
    delay_days_b_ch
    avg_days_b_ch
    max_cpd_b_ch
    max_overdue_b_ch
    roll_back_b_ch
    max_roll_seq_b_ch
    roll_back_seq_b_ch
    max_condue1_b_ch
    con1_due_times_b_ch
    max_condue5_b_ch
    con5_due_times_b_ch
    max_condue10_b_ch
    con10_due_times_b_ch
    his_dueseq_b_ch
    is10fine_b_ch
    seq_duedays_b_ch
    max_seq_duedays_b_ch
    over_due_value_b_ch
    n_cur_balance_b_ch
    avg_rollseq_b_ch
    fine10_seq_ratio_b_ch
    value_income_ratio_b_ch
    value_balance_ratio_b_ch
    overdue_periods_ratio_b_ch
    finish_periods_ratio_b_ch
    due_periods_ratio_b_ch
    cs_times_b_ch
    contact_b_ch
    ptp_b_ch
    fnbm_times_b_ch
    incm_times_b_ch
    his_ptpdays_b_ch
    conlost_b_ch
    lost_b_ch
    recent_contact_day_b_ch
    kptp_b_ch
    bptp_b_ch
    kptp_ratio_b_ch
    bptp_ratio_b_ch
    csfq_b_ch
    due_delay_ratio_b_ch
    due_cstime_ratio_b_ch
    due_contact_ratio_b_ch
    due_ptp_ratio_b_ch
    total_wk_exp_b_ch
;
%let DSin=pm1.a0801_train_bin_ch;
%let DV=target;
%let DSOut=pm1.a0802_Cal_IV;
%PowerIV(&amp;DSin, &amp;DV, &amp;IVList, &amp;DSout);

proc print data=pm1.a0802_Cal_IV; run;
</code></pre>

<h1>09.相关性检测</h1>
<pre><code>******************************************************************************;
*** 09相关性检验   ***; 
******************************************************************************; 
%let varlist=
bptp_ratio_woe
kptp_ratio_woe
max_roll_seq_woe
csfq_woe
max_condue10_woe
con10_due_times_woe
most_contact_3m_woe
max_condue5_woe
con5_due_times_woe
payfinecnt_woe
actualpayfinecnt_woe
payfine_woe
delay_days_woe
actualpayfine_woe
cs_times_woe
max_cpd_woe
contact_woe
max_seq_duedays_woe
due_delay_ratio_woe
bptp_woe
avg_days_woe
max_condue1_woe
avg_rollseq_woe
con1_due_times_woe
roll_back_seq_woe
effectiveannualrate_woe
recent_contact_day_woe
city_woe
managementfeesrate_woe
customerservicerates_woe
salescommission_woe
periods_woe
person_sex_woe
is_suixinhuan_woe
kptp_woe
roll_back_woe
delay_times_woe
ptp_woe
his_ptpdays_woe
cert_4_inital_woe
seq_duedays_woe
min_init_rate_woe
due_ptp_ratio_woe
credit_amount_woe
price_woe
apr_payment_num_woe
insure_status_woe
province_woe
value_balance_ratio_woe
max_overdue_woe
ontime_pay_woe
family_state_woe
payfee_woe
conlost_woe
house_type_woe
actualpayfee_woe
lost_woe
tot_credit_amount_woe
apr_credit_amount_woe
education_woe
fine10_seq_ratio_woe
monthlyinterestrate_woe
incm_times_woe
his_dueseq_woe
over_due_value_woe
is10fine_woe
goods_type_woe
childrentotal_woe
n_cur_balance_woe
pos_type_woe
inter3_count_woe
due_contact_ratio_woe
value_income_ratio_woe
insure_type_woe
due_cstime_ratio_woe
is_certid_province_woe
self_income_woe
init_pay_woe
family_income_woe
payinteamt_woe
certf_interval_years_woe
intime_pay_woe
due_periods_ratio_woe
extra_init_rate_woe
qq_length_woe
qqno_init_woe
rej_count_woe
fnbm_times_woe
app_count_woe
relativetype_woe
finish_periods_woe
pay_periods_woe
payment_rate_woe
is_ssi_woe
actualpayinteamt_woe
finish_periods_ratio_woe
due_periods_woe
seq_delay_days_woe
jobtime_woe
productcategoryname_woe
apr_count_woe
payprincipalnfee_woe
is_work_hr_woe
overdue_periods_ratio_woe
actualpayprincipalnfee_woe
actualpayprinciple_woe
f_same_reg_woe
other_person_type_woe
expense_month_woe
email_woe
total_wk_exp_woe
other_income_woe
f_same_com_woe
payprinciple_woe
/*inner_code_woe*/
chexiao_count_woe
operatemode_woe
;

proc corr data=lf.a0701_train_woe outp=lf.a0901_corr_short;
var &amp;varlist;
run;
PROC EXPORT DATA= lf.a0901_corr_short
OUTFILE= &quot;&amp;output_file./a0901_corr_short.xlsx&quot; 
DBMS=xlsx REPLACE;
 SHEET=&quot;var_corr&quot;; 
RUN;
</code></pre>

<h1>10.全变量逻辑回归</h1>
<pre><code>******************************************************************************;
*** 10逻辑回归，计算KS，画KS曲线，计算ROC，画ROC曲线 参照的代码
*** 建模月份201704，valid 201705, test 其他月 
******************************************************************************;   
%let varlist= 
bptp_ratio_woe
kptp_ratio_woe
max_roll_seq_woe
csfq_woe
con10_due_times_woe
most_contact_3m_woe
con5_due_times_woe
payfinecnt_woe
payfine_woe
delay_days_woe
actualpayfine_woe
cs_times_woe
max_cpd_woe
contact_woe
max_seq_duedays_woe
due_delay_ratio_woe
bptp_woe
avg_days_woe
max_condue1_woe
con1_due_times_woe
recent_contact_day_woe
city_woe
customerservicerates_woe
salescommission_woe
person_sex_woe
is_suixinhuan_woe
kptp_woe
roll_back_woe
delay_times_woe
ptp_woe
cert_4_inital_woe
seq_duedays_woe
credit_amount_woe
price_woe
apr_payment_num_woe
insure_status_woe
value_balance_ratio_woe
max_overdue_woe
ontime_pay_woe
family_state_woe
payfee_woe
conlost_woe
house_type_woe
tot_credit_amount_woe
apr_credit_amount_woe
education_woe
fine10_seq_ratio_woe
monthlyinterestrate_woe
incm_times_woe
over_due_value_woe
is10fine_woe
n_cur_balance_woe
pos_type_woe
inter3_count_woe
due_contact_ratio_woe
value_income_ratio_woe
due_cstime_ratio_woe
is_certid_province_woe
self_income_woe
init_pay_woe
family_income_woe
payinteamt_woe
certf_interval_years_woe
due_periods_ratio_woe
extra_init_rate_woe
qq_length_woe
qqno_init_woe
rej_count_woe
fnbm_times_woe
app_count_woe
relativetype_woe
finish_periods_woe
payment_rate_woe
is_ssi_woe
finish_periods_ratio_woe
due_periods_woe
productcategoryname_woe
apr_count_woe
is_work_hr_woe
actualpayprincipalnfee_woe
actualpayprinciple_woe
other_person_type_woe
;

/*建模*/
proc logistic data=pm1.a0701_train_woe outmodel=pm1.a1001_model1/*logistic建模文件*/
outest =pm1.a1001_model1_params alpha=0.05;   /*logistic参数和协方差阵*/
model target (event='1')=&amp;varlist//*目标变量、x变量集*/
SELECTION =S  SLE=0.05 SLS=0.05  ;   /*逐步回归调选变量、0.05条件*/
/*增加4个变量：_level_,pred_target,pi_l,pi_u*/
output out=pm1.a1001_model1_pred_probs p=pred_target lower=pi_l upper=pi_u;   
run;

/*绘制KS曲线*/
%let dsin=pm1.a1001_model1_pred_probs;%let probvar=pred_target;%let dvvar=target;%let dsks=pm1.a1001_dsks1;%let ks=;%KSStat(&amp;DSin, &amp;ProbVar, &amp;DVVar, &amp;DSKS, KS);
%put &amp;=KS;
</code></pre>

<h1>11.变量表现</h1>
<pre><code>******************************************************************************;
*** 11变量表现 ***; 
******************************************************************************; 

data pm1.a1101_varlist;
  input name $32.;
  cards;
avg_days_b
avg_rollseq_b
bptp_b
bptp_ratio_b
city_b
con10_due_times_b
con1_due_times_b
con5_due_times_b
delay_times_b
education_b
family_state_b
fine10_seq_ratio_b
finish_periods_ratio_b
his_dueseq_b
is_suixinhuan_b
kptp_b
kptp_ratio_b
max_condue10_b
max_condue5_b
max_cpd_b
max_overdue_b
max_roll_seq_b
max_seq_duedays_b
most_contact_3m_b
ontime_pay_b
other_person_type_b
over_due_value_b
payfee_b
payfine_b
person_sex_b
price_b
roll_back_seq_b
seq_delay_days_b
seq_duedays_b
tot_credit_amount_b
value_balance_ratio_b
  ;
run; 

%macro var_perf(varlist,dsin,dsout);
data _null_;  
  set &amp;varlist.;  
  call symput('varn'||left(put(_n_,4.)),compress(_n_));   
  call symput('name'||left(put(_n_,4.)),trim(name));   
run;  
%put &amp;=varn1 &amp;=name1; 
%put &amp;=varn2 &amp;=name2; 

proc sql; 
select count(name) into: varnum_count from &amp;varlist.; 
quit;   

proc sql;  
create table &amp;dsout.
(
  VAR_NAME  CHAR(32),
  clus  INTEGER,
  N INTEGER,
  N1INTEGER,
  N0INTEGER
);

%do i= 1 %to &amp;varnum_count.;
insert into &amp;dsout.
select distinct substr(&quot;&amp;&amp;name&amp;i.&quot;,1,length(&quot;&amp;&amp;name&amp;i.&quot;)-2) as VAR_NAME
   ,&amp;&amp;name&amp;i. as clus
   ,count(1) as N 
   ,sum(target) as N1
       ,count(1)-sum(target) as N0
from  &amp;dsin. 
group by &amp;&amp;name&amp;i.;
%end;
quit;

proc sort data= &amp;dsout.; by Var_Name clus; run;
proc sort data= pm1.a0502_VAR_NUM_GROUP;  by Var_Name Bin;  run;

data &amp;dsout.;
  retain VAR_NAME LL UL 
 N N0 N1 clus
  ;
  merge &amp;dsout. (in=a)
        pm1.a0502_VAR_NUM_GROUP  (in=c keep=Var_Name Bin LL UL rename=(bin=clus))
  ;
  by Var_Name clus;
  if a;
  keep VAR_NAME LL UL 
   N N0 N1 clus
  ;
run;

%mend;


%let varlist = pm1.a1101_varlist;
%let dsin = pm1.a0601_train_group;
%let dsout   = pm1.a1102_var_perf;
%var_perf(&amp;varlist,&amp;dsin,&amp;dsout);

proc print data=pm1.a1102_var_perf;run;
</code></pre>

<h1>12.变量单调性调整</h1>
<pre><code>******************************************************************************;
*** 12 变量单调性调整，重新分组及计算 WOE***; 
******************************************************************************; 
*** 宏 %vardandiao是对单个变量分组的调整;
/*%macro vardandiao(Dsin,varname);*/
/*data &amp;Dsin;*/
/*set &amp;Dsin;*/
/**/
/*if kptp =. then do;kptp_b=1;end;*/
/*else if kptp &lt;5 then do;kptp_b=2;end;*/
/*else if kptp &lt;8 then do;kptp_b=3;end;*/
/*else if kptp &gt;=8 then do;kptp_b=4;end;*/
/**/
/*run;*/
/*proc sql;  */
/*create table pm1.a1201_&amp;varname.*/
/*(*/
/* */
/*  clus  INTEGER,*/
/*  total INTEGER,*/
/*  good   INTEGER,*/
/*  badINTEGER*/
/*);*/
/**/
/*insert into pm1.a1201_&amp;varname.*/
/*select */
/* &amp;varname._b as clus*/
/*   ,count(1) as total */
/*     ,count(1)-sum(target) as good*/
/*   ,sum(target) as bad*/
/*from  &amp;dsin. group by &amp;varname._b;*/
/**/
/*quit;*/
/*proc print data=pm1.a1201_&amp;varname.;run;*/
/*%mend;*/
/*%let Dsin=pm1.a0701_train_woe;%let varname=kptp;%vardandiao(&amp;Dsin,&amp;varname);*/



%macro ManulGroupWoe(Dsout,Dsin);
data &amp;Dsout;
set &amp;Dsin;

if kptp=. then do;kptp_b=1;kptp_woe=0.3376   ;end;
else if kptp&lt;5 then do;kptp_b=2;kptp_woe=-0.0596  ;end;
else if kptp&lt;8 then do;kptp_b=3;kptp_woe=-0.1291   ;end;
else if kptp&gt;=8 then do;kptp_b=4;kptp_woe=-0.1777   ;end;

if max_cpd&lt;5 then do;max_cpd_b=1;max_cpd_woe=-0.960911836585 ;end;
else if max_cpd&lt;15 then do;max_cpd_b=2;max_cpd_woe=-0.113692243111 ;end;
else if max_cpd&lt;25 then do;max_cpd_b=3;max_cpd_woe=0.702195178792   ;end;
else if max_cpd&lt;40 then do;max_cpd_b=4;max_cpd_woe=1.303698941884   ;end;
else if max_cpd&gt;=40 then do;max_cpd_b=5;max_cpd_woe=1.463094866194 ;end;
else if max_cpd=. then do;max_cpd_b=5;max_cpd_woe=1.463094866194 ;end;

if max_roll_seq&lt;1 then do;max_roll_seq_b=1;max_roll_seq_woe=-1.054523488424  ;end;
else if max_roll_seq&lt;1.2 then do;max_roll_seq_b=2;max_roll_seq_woe=0.017471392367  ;end;
else if max_roll_seq&gt;=1.2 then do;max_roll_seq_b=3;max_roll_seq_woe=1.358802292668   ;end;
else if max_roll_seq=. then do;max_roll_seq_b=3;max_roll_seq_woe=1.358802292668  ;end;

if ontime_pay&lt;1.1 then do;ontime_pay_b=1;ontime_pay_woe= 0.253498582523 ;end;
else if ontime_pay&lt;3.1 then do;ontime_pay_b=2;ontime_pay_woe=-0.081204110541   ;end;
else if ontime_pay&lt;5.1 then do;ontime_pay_b=3;ontime_pay_woe=-0.215620480233   ;end;
else if ontime_pay&lt;10.1 then do;ontime_pay_b=4;ontime_pay_woe=-0.296125602727;end;
else if ontime_pay&gt;=10.1 then do;ontime_pay_b=5;ontime_pay_woe=-0.328952680313   ;end;
else if ontime_pay=. then do;ontime_pay_b=1;ontime_pay_woe= 0.253498582523 ;end;

if over_due_value&lt;200 then do;over_due_value_b=1;over_due_value_woe=-0.367253984160 ;end;
else if over_due_value&lt;300 then do;over_due_value_b=2;over_due_value_woe=-0.167083548725  ;end;
else if over_due_value&lt;500 then do;over_due_value_b=3;over_due_value_woe=0.113338468031  ;end;
else if over_due_value&gt;=500 then do;over_due_value_b=4;over_due_value_woe=0.240052976422  ;end;
if over_due_value=. then do;over_due_value_b=4;over_due_value_woe=0.240052976422  ;end;

if payfee&lt;200 then do;payfee_b=1;payfee_woe=-0.571400646201 ;end;
else if payfee&lt;500 then do;payfee_b=2;payfee_woe=-0.040823171719 ;end;
else if payfee&lt;1000 then do;payfee_b=3;payfee_woe=0.216346153809 ;end;
else if payfee&gt;=1000 then do;payfee_b=4;payfee_woe=0.214525381891 ;end;
else if payfee=. then do;payfee_b=4;payfee_woe=0.214525381891 ;end;

if tot_credit_amount&lt;2500 then do;tot_credit_amount_b=1;tot_credit_amount_woe=-0.350296921345 ;end;
else if tot_credit_amount&lt;3000 then do;tot_credit_amount_b=2;tot_credit_amount_woe=-0.124961782082  ;end;
else if tot_credit_amount&lt;4000 then do;tot_credit_amount_b=3;tot_credit_amount_woe=-0.030106519645  ;end;
else if tot_credit_amount&lt;5000 then do;tot_credit_amount_b=4;tot_credit_amount_woe=0.166023504477  ;end;
else if tot_credit_amount&gt;=5000 then do;tot_credit_amount_b=5;tot_credit_amount_woe=0.202240084005  ;end;
else if tot_credit_amount=. then do;tot_credit_amount_b=5;tot_credit_amount_woe=0.202240084005  ;end;

if person_sex=1 then do;person_sex_b=1;person_sex_woe=0.131814011913;end;
else if person_sex=0 then do;person_sex_b=2;person_sex_woe=-0.386912500569;end;
else do;person_sex_b=1;person_sex_woe=0.131814011913;end;

if education=0 then do;education_b=1;education_woe=0.119990746141 ;end;
else if education=1 then do;education_b=1;education_woe=0.119990746141 ;end;
else if education=2 then do;education_b=1;education_woe=0.119990746141 ;end;
else if education=3 then do;education_b=2;education_woe=-0.002398119696;end;
else if education=4 then do;education_b=3;education_woe=-0.024389576547 ;end;
else if education=5 then do;education_b=4;education_woe=-0.308429884099 ;end;
else if education=6 then do;education_b=5;education_woe=-0.503292548699;end;
else if education=7 then do;education_b=5;education_woe=-0.503292548699;end;
else do;education_b=1;education_woe=0.119990746141 ;end;

if city = '桂林市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '楚雄彝族自治州' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '恩施土家族苗族自治州' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '白银市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '十堰市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '中山市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '厦门市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '温州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '常州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '东莞市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '嘉兴市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '潮州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '昆明市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '江门市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '银川市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '延安市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '梧州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '迪庆藏族自治州' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '乌鲁木齐市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '台州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '咸宁市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '来宾市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '昌吉回族自治州' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '莆田市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '柳州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '海东市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '酒泉市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '石嘴山市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '荆州市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '庆阳市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '吴忠市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '汕头市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '中卫市' then do; city_b= 1;city_woe=0.371745095166;end;
else if city = '滨州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '南昌市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '贵阳市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '铜陵市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '平凉市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '东营市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '衢州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '宝鸡市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '南宁市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '鄂州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '青岛市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '岳阳市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '榆林市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '陇南市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '合肥市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '延边朝鲜族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '烟台市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '西安市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '凉山彝族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '湘潭市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '丽江市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '湘西土家族苗族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '张家界市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '红河哈尼族彝族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '信阳市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '保山市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '孝感市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '长沙市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '黔西南布依族苗族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '深圳市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '威海市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '梅州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '株洲市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '黄山市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '重庆市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '商洛市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '揭阳市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '丽水市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '常德市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '兰州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '德宏傣族景颇族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '宁波市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '佳木斯市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '普洱市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '淮安市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '临沂市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '定西市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '泉州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '无锡市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '六安市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '安庆市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '永州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '襄阳市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '衡水市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '武威市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '金华市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '玉溪市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '娄底市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '镇江市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '荆门市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '苏州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '西宁市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '兴安盟' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '绍兴市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '龙岩市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '抚州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '潍坊市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '曲靖市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '上海市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '昭通市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '泰州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '大理白族自治州' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '扬州市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '武汉市' then do; city_b= 2;city_woe=0.133044169466;end;
else if city = '南通市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '泸州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '百色市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '天津市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '临沧市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '怀化市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '广安市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '清远市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '漳州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '忻州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '汕尾市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '长春市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '宜春市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '秦皇岛市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '盐城市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '淄博市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '佛山市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '淮南市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '黔南布依族苗族自治州' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '宿州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '成都市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '阳江市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '韶关市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '益阳市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '西双版纳傣族自治州' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '资阳市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '白城市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '渭南市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '安康市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '吉林市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '南京市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '珠海市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '徐州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '南平市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '毕节市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '湖州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '大连市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '白山市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '北京市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '咸阳市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '钦州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '河池市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '玉林市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '贺州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '广州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '六盘水市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '承德市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '汉中市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '德州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '邵阳市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '安顺市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '杭州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '芜湖市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '惠州市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '铜仁市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '衡阳市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '蚌埠市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '北海市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '文山壮族苗族自治州' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '防城港市' then do; city_b= 3;city_woe=-0.009141910286 ;end;
else if city = '铜川市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '德阳市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '遂宁市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '达州市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '黄冈市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '阳泉市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '长治市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '马鞍山市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '攀枝花市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '景德镇市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '舟山市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '九江市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '泰安市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '乐山市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '遵义市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '哈尔滨市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '枣庄市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '周口市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '通辽市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '聊城市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '松原市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '牡丹江市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '巴中市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '内江市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '三明市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '保定市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '邢台市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '大庆市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '漯河市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '盘锦市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '金昌市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '大同市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '南充市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '宿迁市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '福州市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '黔东南苗族侗族自治州' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '天水市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '双鸭山市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '眉山市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '贵港市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '儋州市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '郑州市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '沈阳市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '四平市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '宜宾市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '茂名市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '自贡市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '雅安市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '济南市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '宣城市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '辽源市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '广元市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '鹰潭市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '抚顺市' then do; city_b= 4;city_woe=-0.094739646913 ;end;
else if city = '乌海市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '临夏回族自治州' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '巴彦淖尔市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '嘉峪关市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '甘孜藏族自治州' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '商丘市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '莱芜市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '平顶山市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '新余市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '鹤壁市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '唐山市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '驻马店市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '焦作市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '本溪市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '济宁市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '新乡市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '省直辖行政单位' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '鞍山市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '晋中市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '葫芦岛市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '朝阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '张家口市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '黑河市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '丹东市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '包头市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '崇左市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '安阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '连云港市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '吕梁市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '晋城市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '营口市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '乌兰察布市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '鄂尔多斯市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '随州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '淮北市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '锦州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '上饶市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '日照市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '三亚市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '阜阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '廊坊市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '省直辖县级行政单位' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '洛阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '赣州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '太原市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '朔州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '三门峡市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '海口市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '宜昌市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '鸡西市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '临汾市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '濮阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '张掖市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '河源市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '南阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '锡林郭勒盟' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '开封市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '邯郸市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '齐齐哈尔市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '通化市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '云浮市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '湛江市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '铁岭市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '吉安市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '郴州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '亳州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '萍乡市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '滁州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '省直辖县级行政区划' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '赤峰市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '绵阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '鹤岗市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '七台河市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '呼伦贝尔市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '沧州市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '绥化市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '菏泽市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '肇庆市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '许昌市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '辽阳市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '宁德市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '伊春市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '石家庄市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '黄石市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '呼和浩特市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '运城市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city = '阜新市' then do; city_b= 5;city_woe=-0.247521172958 ;end;
else if city ='.' then do; city_b= 1;city_woe=0.371745095166;end;
else do;city_b=1;city_woe=0.472058759971522;end;

keep
contract_no  putout_date  state_date  customerid province target state_month
max_cpd max_cpd_b     max_cpd_woe
kptp     kptp_b  kptp_woe
tot_credit_amount   tot_credit_amount_b tot_credit_amount_woe
ontime_pay   ontime_pay_b      ontime_pay_woe
person_sex    person_sex_b  person_sex_woe
education      education_b     education_woe
city      city_b    city_woe
max_roll_seq    max_roll_seq_b  max_roll_seq_woe
payfee     payfee_b   payfee_woe
over_due_value    over_due_value_b   over_due_value_woe;

run;
%mend;

%let Dsout=pm1.train_woe;%let Dsin=pm1.a0302_train;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.valid_woe;%let Dsin=pm1.a0302_valid;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_woe;%let Dsin=pm1.a0302_test;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);

%let Dsout=pm1.test_1611_woe;%let Dsin=pm1.a0302_test_1611;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1612_woe;%let Dsin=pm1.a0302_test_1612;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1701_woe;%let Dsin=pm1.a0302_test_1701;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1702_woe;%let Dsin=pm1.a0302_test_1702;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1703_woe;%let Dsin=pm1.a0302_test_1703;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1706_woe;%let Dsin=pm1.a0302_test_1706;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1707_woe;%let Dsin=pm1.a0302_test_1707;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1708_woe;%let Dsin=pm1.a0302_test_1708;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1709_woe;%let Dsin=pm1.a0302_test_1709;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
%let Dsout=pm1.test_1710_woe;%let Dsin=pm1.a0302_test_1710;%ManulGroupWoe(&amp;Dsout,&amp;Dsin);
</code></pre>

<h1>13.最终模型</h1>
<pre><code>*******************************************************************************************************;
*** 逻辑回归，计算Accuracy等，计算KS，画KS曲线，计算ROC，画ROC曲线，计算Gini 
*** 宏 %macro ModelSummary(Author,Model_name,Lib_name,Var_list,Train_ds,Valid_ds,Test_ds,Mon_list);
*** model_name：模型名称，Lib_name：逻辑库名称
*** Var_list：入模变量，Mon_list：月份集合
*** 注：1.通过在 Mon_list 中添加月份，可以更新新的月份
                3.样本集的数据表名称形式为(以 lf_xy 逻辑库为例) 
                    train_woe，valid_woe，test_woe，test_1703_woe，test_1704_woe........
                    前三个分别为总的训练集，验证集，测试集，后面为分月的测试集，名称命名为  test_月份_woe
*********************************************************************************************************;  
*** lf.mon_list 运行一次即可;
data pm1.mon_list;input month $32.;cards; 
train
valid
test
test_1611
test_1612
test_1701
test_1702
test_1703
test_1706
test_1707
test_1708
test_1709
test_1710
;run; 


%macro ModelSummary(Model_name,Lib_name,Mon_list,Var_list);
%let varlist1=&amp;Var_list;  run;  /*此处填写入模变量集*/

proc sql; 
select count(month) into: month_count from &amp;Mon_list;
select month into: MonthArray separated by ' ' from  &amp;Mon_list;
quit; 

/*logistic建模*/
proc logistic data=&amp;Lib_name..train_woe outmodel=&amp;Lib_name..model1 /*logistic建模文件 train_woe*/
outest =&amp;Lib_name..train_model_params alpha=0.05;/*logistic参数和协方差阵*/
model target (event='1')=&amp;varlist1/ stb/*目标变量、x变量集*/
SELECTION =S  SLE=0.05 SLS=0.05  ; /*逐步回归调选变量、0.05条件*/
output out=&amp;Lib_name..train_pred_probs p=pred_target lower=pi_l upper=pi_u;   /*增加4个变量：_level_,pred_target,pi_l,pi_u*/
run;

/*对valid,test及分月test文件打分*/
%do i= 2 %to &amp;month_count.;   
%let month=%scan(&amp;MonthArray,&amp;i,' ') ;
proc logistic inmodel=&amp;Lib_name..model1;score data=&amp;Lib_name..&amp;month._woe out=&amp;Lib_name..&amp;month._pred_probs;run;proc freq data=&amp;Lib_name..&amp;month._pred_probs;tables F_target*I_target ;run;data &amp;Lib_name..&amp;month._pred_probs(rename=(P_1=pred_target));set &amp;Lib_name..&amp;month._pred_probs;I_target2 = I_target*1;target = F_target*1;run;
%end;

%do i= 1 %to &amp;month_count.;
%let month=%scan(&amp;MonthArray,&amp;i,' ') ;
/*confusion 矩阵*/
%let dsin=&amp;Lib_name..&amp;month._pred_probs ;%let probvar=pred_target;%let dvvar=target;%let cutoff=0.5;%let dscm=&amp;Lib_name..confusionMatrix_&amp;month.;%ConfMat(&amp;DSin, &amp;ProbVar, &amp;DVVar, &amp;Cutoff, &amp;DSCM);run;

/*计算 1. Accuracy,Precision,Recall,F_value; 2. KS; 3. ROC; 4. Gini;*/
data &amp;Lib_name..confusionMatrix_&amp;month.;set &amp;Lib_name..confusionMatrix_&amp;month.;Accuracy =(TN+TP)/Ntotal;Precision=TP/(TP+FP);Recall =TP/(TP+FN);F_value =2*Precision*Recall/(Precision+Recall);id=&quot;&amp;month.&quot;;run;
%let dsin=&amp;Lib_name..&amp;month._pred_probs ;%let probvar=pred_target;%let dvvar=target;%let dsks=&amp;Lib_name..dsks_&amp;month.;%let ks=;%KSStat(&amp;DSin, &amp;ProbVar, &amp;DVVar, &amp;DSKS, KS);
proc sql;create table &amp;Lib_name..tmp_&amp;month. as select *,&quot;&amp;month.&quot;  as id from &amp;Lib_name..dsks_&amp;month. where ks in (select max(ks) as ks from &amp;Lib_name..dsks_&amp;month.);quit;data &amp;Lib_name..confusionMatrix_&amp;month.;merge &amp;Lib_name..confusionMatrix_&amp;month. &amp;Lib_name..tmp_&amp;month.;by id;run;
%let dsin=&amp;Lib_name..&amp;month._pred_probs ;%let probvar=pred_target;%let dvvar=target;%let dsroc=&amp;Lib_name..dsroc_&amp;month.;%let aucStat=;%ROC(&amp;DSin, &amp;ProbVar, &amp;DVVar, &amp;DSROC, aucStat);
data &amp;Lib_name..confusionMatrix_&amp;month.;set &amp;Lib_name..confusionMatrix_&amp;month.;AUC=&amp;aucStat;run;
%let dsin=&amp;Lib_name..&amp;month._pred_probs ;%let probvar=pred_target;%let dvvar=target;%let dslorenz=&amp;Lib_name..lorenzds;%let giniStat=;%GiniStat(&amp;DSin, &amp;ProbVar, &amp;DVVar, &amp;dslorenz, giniStat);
data &amp;Lib_name..confusionMatrix_&amp;month.;set &amp;Lib_name..confusionMatrix_&amp;month.;Gini=&amp;giniStat;run;
/*保存带概率值的数据集*/
data &amp;Lib_name..a1301_&amp;month._&amp;Model_name.;set &amp;Lib_name..&amp;month._pred_probs;run;
data &amp;Lib_name..temp_&amp;i;set &amp;Lib_name..confusionMatrix_&amp;month.;run;
%end;

/*temp_x,如果mon_list有11行，则要添加到temp_11,目前为10行*/
data &amp;Lib_name..Result_summary_&amp;Model_name.;format id $10.;
set &amp;Lib_name..temp_1 &amp;Lib_name..temp_2 &amp;Lib_name..temp_3 &amp;Lib_name..temp_4 &amp;Lib_name..temp_5 &amp;Lib_name..temp_6
      &amp;Lib_name..temp_7 &amp;Lib_name..temp_8 &amp;Lib_name..temp_9 &amp;Lib_name..temp_10 &amp;Lib_name..temp_11 &amp;Lib_name..temp_12 &amp;Lib_name..temp_13;run;

%put &amp;KS;%PlotKS (&amp;dsks);%PlotROC(&amp;DSROC);
proc print data=&amp;Lib_name..Result_summary_&amp;Model_name.;var id Ntotal P N Accuracy Precision Recall F_value AUC KS Gini;run;
%mend;

*** pm1  final1 ********************************************************************************************;
%let mon_list=pm1.mon_list;
%ModelSummary(final1,pm1,&amp;mon_list,city_woe kptp_woe max_cpd_woe over_due_value_woe person_sex_woe tot_credit_amount_woe max_roll_seq_woe ontime_pay_woe);
</code></pre>

<h1>14.模型排序效果</h1>
<pre><code>******************************************************************************;
*** 14模型排序效果 ***; 
******************************************************************************; 


%macro Model_Order_Effect(model_name,DSin, ProbVar, DVVar, DSKS, M_KS, Ngroup);

data &amp;DSin;
   set  pm1.a1301_train_&amp;model_name  pm1.a1301_valid_&amp;model_name pm1.a1301_test_&amp;model_name;
run;

/* Sort the observations using the predicted Probability */
proc sort data=&amp;DsIn;
by descending &amp;ProbVar;
run;

/* Find the total number of Positives and Negatives */
proc sql noprint;
 select sum(&amp;DVVar) into:P from &amp;DSin;
 select count(*) into :Ntot from &amp;DSin;
 quit;
 %let N=%eval(&amp;Ntot-&amp;P); /* Number of negative */
%put &amp;=P;

 /* The base of calculation is 100 tiles */

/* Count number of positive and negatives per tile, their proportions and 
cumulative proportions decile */
data &amp;DSKS;
set &amp;DsIn nobs=NN;
by descending &amp;ProbVar;
rank_num = _n_;
retain tile 1  totP  0 totN 0;
/*Tile_size=round(NN/&amp;Ngroup.);*/
Tile_size=NN/&amp;Ngroup.;

if &amp;DVVar=1 then totP=totP+&amp;DVVar;
else totN=totN+1;

Pper=totP/&amp;P;
Nper=totN/&amp;N;

/* end of tile? */
if _N_ = round(Tile*Tile_Size) then 
  do;
  output;
   if Tile &lt;= &amp;Ngroup. then  
   do;
 Tile=Tile+1;
         SumResp=0;
       end;
  end;

keep Tile totP totN Pper Nper rank_num;
run;


/* Scale the tile to represent percentage and add labels*/
data &amp;DSKS;
retain Tile group_num N1 bad_rate totP totN Pper Nper Tile_Pct KS_report LIFT pass_rate rev_bad_rate;
    set &amp;DSKS;
    Tile_Pct=Tile/&amp;Ngroup.;

/* calculate the KS Curve/Lift */
/*KS=NPer-PPer;*/
    KS=PPer-NPer;
    KS_report = lag(KS);
    if Tile=1 then KS_report = 0;

/*计算每组别客户数、坏客户数*/
group_num = rank_num - lag(rank_num);
    if Tile=1 then group_num = rank_num;
    N1 = totP - lag(totP);
    if Tile=1 then N1 = totP;

/*通过率*/
    pass_rate = 1-(1/&amp;Ngroup.)*(Tile-1);

/*客户累积比率*/
bad_rate = N1/group_num;
LIFT = bad_rate / (&amp;P./&amp;Ntot.);

/*对应逾期率*/
    denominator = &amp;Ntot.-lag(rank_num);
    if Tile=1 then denominator = &amp;Ntot;
    numerator = &amp;P.-lag(totP);
    if Tile=1 then numerator = &amp;P.;
    rev_bad_rate = numerator / denominator;

    label Tile = '组别';
    label group_num = '总客户数';
    label N1 = '坏客户数';
    label bad_rate = '逾期率';
    label totP = '累积坏客户数';
    label totN = '累积好客户数';
    label Pper='累积坏客户比率';
    label Nper ='累积好客户比率';
label Tile_Pct = '客户累积比率';
    label pass_rate = '通过率';
    label rev_bad_rate = '对应逾期率';
    label KS_report = 'KS';

    format   bad_rate percent8.2 
   KS_report percent8.2 
   LIFT 8.1 
   pass_rate percent8.2 
   rev_bad_rate percent8.2;

keep Tile group_num N1 bad_rate KS_report LIFT pass_rate rev_bad_rate;

run;

/* Clean the workspace */
proc datasets library=work nodetails nolist;
 delete temp ;
run;
quit;

%mend;

%let model_name=final1;
%let probvar=pred_target;
%let dvvar=target;
%let dsin=pm1.a1401_dat_all_&amp;model_name;
%let dsks=pm1.a1402_order_perf_&amp;model_name.;
%let ks=;
%let Ngroup=20;
%Model_Order_Effect(&amp;model_name, &amp;DSin, &amp;ProbVar, &amp;DVVar, &amp;DSKS, ks, &amp;Ngroup);

proc print data=pm1.a1402_order_perf_final1;run;
</code></pre>

<h1>15.各省模型表现</h1>
<pre><code>******************************************************************************;
*** 15各省模型表现 ***; 
******************************************************************************; 
%macro prov_perf(DSin,DSout);
proc sql;
create table &amp;DSout as
select province, count(1) as n,sum(target)/count(1) as badrate, sum(pred_target)/count(1) as p
from &amp;DSin
group by province;
quit;

proc sort data= &amp;DSout; by descending n; run;
proc print data=&amp;DSout;run;
%mend;

%let model_name =final1; %let DSin = pm1.a1301_test_&amp;model_name.; %let DSout = pm1.a1501_prov_perf_&amp;model_name.; %prov_perf(&amp;DSin,&amp;DSout);
</code></pre>

<h1>16.变量稳定性计算</h1>
<pre><code>******************************************************************************;
*** 10变量稳定性计算   ***; 
******************************************************************************; 

****SSI Calculation**********************************************************;
/*Test分月数据*/

%macro PreventCoverage(Lib_name,model_name);

/*变量表*/
proc transpose data= &amp;Lib_name..train_model_params out=para_in;run;

data &amp;Lib_name..a1601_vardic;
  set para_in(keep= _NAME_);
  if _NAME_ not in ('Intercept','_LNLIKE_');
  format variable $32.;
  variable = tranwrd(_NAME_,'_woe','_b');
  drop _NAME_;
run;

/*防止名字太长*/
data &amp;Lib_name..train_&amp;model_name;set &amp;Lib_name..a1301_train_&amp;model_name;run;
data &amp;Lib_name..test_1611_&amp;model_name;set &amp;Lib_name..a1301_test_1611_&amp;model_name;run;
data &amp;Lib_name..test_1612_&amp;model_name;set &amp;Lib_name..a1301_test_1612_&amp;model_name;run;
data &amp;Lib_name..test_1701_&amp;model_name;set &amp;Lib_name..a1301_test_1701_&amp;model_name;run;
data &amp;Lib_name..test_1702_&amp;model_name;set &amp;Lib_name..a1301_test_1702_&amp;model_name;run;
data &amp;Lib_name..test_1703_&amp;model_name;set &amp;Lib_name..a1301_test_1703_&amp;model_name;run;
/*data &amp;Lib_name..train_&amp;model_name;set &amp;Lib_name..a1301_train_&amp;model_name;run;*/
/*data &amp;Lib_name..valid_&amp;model_name;set &amp;Lib_name..a1301_valid_&amp;model_name;run;*/
data &amp;Lib_name..test_1706_&amp;model_name;set &amp;Lib_name..a1301_test_1706_&amp;model_name;run;
data &amp;Lib_name..test_1707_&amp;model_name;set &amp;Lib_name..a1301_test_1707_&amp;model_name;run;
data &amp;Lib_name..test_1708_&amp;model_name;set &amp;Lib_name..a1301_test_1708_&amp;model_name;run;
data &amp;Lib_name..test_1709_&amp;model_name;set &amp;Lib_name..a1301_test_1709_&amp;model_name;run;
data &amp;Lib_name..test_1710_&amp;model_name;set &amp;Lib_name..a1301_test_1710_&amp;model_name;run;

/*SSI计算*/
%let train_data = &amp;Lib_name..train_&amp;model_name;
%let model_coef = &amp;Lib_name..a1601_vardic;
%let test_data = &amp;Lib_name..test_1611_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1612_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1701_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1702_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1703_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
/*%let test_data = &amp;Lib_name..train_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);*/
/*%let test_data = &amp;Lib_name..valid_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);*/
%let test_data = &amp;Lib_name..test_1706_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1707_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1708_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1709_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);
%let test_data = &amp;Lib_name..test_1710_&amp;model_name; %totalssi(&amp;train_data.,&amp;test_data.,&amp;model_coef.);

data &amp;Lib_name..a1602_ssi_summary_&amp;model_name;
set   &amp;Lib_name..test_1611_&amp;model_name._var_psi 
        &amp;Lib_name..test_1612_&amp;model_name._var_psi 
        &amp;Lib_name..test_1701_&amp;model_name._var_psi 
        &amp;Lib_name..test_1702_&amp;model_name._var_psi 
        &amp;Lib_name..test_1703_&amp;model_name._var_psi 
/*      &amp;Lib_name..train_&amp;model_name._var_psi */
/*      &amp;Lib_name..valid_&amp;model_name._var_psi */
        &amp;Lib_name..test_1706_&amp;model_name._var_psi 
        &amp;Lib_name..test_1707_&amp;model_name._var_psi 
        &amp;Lib_name..test_1708_&amp;model_name._var_psi 
        &amp;Lib_name..test_1709_&amp;model_name._var_psi
        &amp;Lib_name..test_1710_&amp;model_name._var_psi
;
run;

proc delete data= para_in; run;
%mend;

%let Lib_name=pm1;%let model_name=final1;%PreventCoverage(&amp;Lib_name,&amp;model_name);
</code></pre>

<h1>17.模型稳定性PSI计算</h1>
<pre><code>******************************************************************************;
*** 17模型稳定性PSI计算  ***; 
******************************************************************************; 
****PSI Calculation**********************************************************;
%macro psi_summary(Lib_name,model_name,Nb);

/*计算PSI*/
%let train_data = &amp;Lib_name..a1301_train_&amp;model_name;
%let P = pred_target;
%let Nb = 10;
%let test_data = &amp;Lib_name..a1301_test_1611_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1611_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1612_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1612_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1701_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1701_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1702_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1702_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1703_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1703_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_train_&amp;model_name; %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1704_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_valid_&amp;model_name; %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1705_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1706_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1706_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1707_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1707_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1708_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1708_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1709_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1709_&amp;model_name._psi;set &amp;train_data._psi;run;
%let test_data = &amp;Lib_name..a1301_test_1710_&amp;model_name;  %totalpsi(&amp;train_data,&amp;test_data,&amp;P,&amp;Nb);data &amp;Lib_name..a1701_1710_&amp;model_name._psi;set &amp;train_data._psi;run;

data &amp;Lib_name..a1701_psi_cal_&amp;model_name;
  retain model month sum;
set  &amp;Lib_name..a1701_1611_&amp;model_name._psi(in=a1)  
        &amp;Lib_name..a1701_1612_&amp;model_name._psi(in=a2) 
        &amp;Lib_name..a1701_1701_&amp;model_name._psi(in=a3)  
        &amp;Lib_name..a1701_1702_&amp;model_name._psi(in=a4)  
        &amp;Lib_name..a1701_1703_&amp;model_name._psi(in=a5)  
        &amp;Lib_name..a1701_1704_&amp;model_name._psi(in=a6)  
        &amp;Lib_name..a1701_1705_&amp;model_name._psi(in=a7)  
        &amp;Lib_name..a1701_1706_&amp;model_name._psi(in=a8)  
        &amp;Lib_name..a1701_1707_&amp;model_name._psi(in=a9) 
        &amp;Lib_name..a1701_1708_&amp;model_name._psi(in=a10) 
        &amp;Lib_name..a1701_1709_&amp;model_name._psi(in=a11)  
        &amp;Lib_name..a1701_1710_&amp;model_name._psi(in=a12); 
         if a1=1 then month = 1611;
          if a2=1 then month = 1612;
          if a3=1 then month = 1701;
          if a4=1 then month = 1702;
          if a5=1 then month = 1703;
          if a6=1 then month = 1704;
          if a7=1 then month = 1705;
          if a8=1 then month = 1706;
          if a9=1 then month = 1707;
          if a10=1 then month = 1708;
          if a11=1 then month = 1709;
          if a12=1 then month = 1710;
          model = &quot;&amp;model_name.&quot;;
  if Bin = &amp;Nb;

  keep model month sum;
  rename sum=PSI;
run;
%mend;

%let Lib_name=pm1;%let model_name = final1;%let Nb = 20;%psi_summary(&amp;Lib_name,&amp;model_name,&amp;Nb);
</code></pre>

<h1>18.评分卡评分</h1>
<pre><code>******************************************************************************;
*** 18评分卡评分 ***; 
******************************************************************************;   
data pm1.month;input month $32.;cards; 
test_1611  
test_1612
test_1701 
test_1702 
test_1703 
train
valid
test_1706 
test_1707 
test_1708  
test_1709 
test_1710
;run; 
%macro score_cal1(lib_name,model_name,mon_list);
proc sql; 
select count(month) into: month_count from &amp;mon_list;
select month into: MonthArray separated by ' ' from  &amp;mon_list;
quit; 

%do i= 1 %to &amp;month_count.;   
%let month=%scan(&amp;MonthArray,&amp;i,' ') ;

data &amp;lib_name..a1801_&amp;month._&amp;model_name._score;
set &amp;lib_name..a1301_&amp;month._&amp;model_name.;
RAW_SCORE = -2.1
+max_cpd_woe*0.92
+kptp_woe*2.53
+tot_credit_amount_woe*0.539
+ontime_pay_woe*0.748
+person_sex_woe*0.80
+city_woe*0.688
+max_roll_seq_woe*0.0479
+over_due_value_woe*0.7
; 
F_SCORE = EXP(RAW_SCORE)/(1+EXP(RAW_SCORE));
SCORE =  450 - 72.1347520444482 * LOG(F_SCORE/(1-F_SCORE));
run;
%end;
%mend;
%let lib_name=pm1;%let model_name=final1;%let mon_list=pm1.month;%score_cal1(&amp;lib_name,&amp;model_name,&amp;mon_list);

%macro MonthScore(lib_name,model_name,mon_list);
proc sql; 
select count(month) into: month_count from &amp;mon_list;
select month into: MonthArray separated by ' ' from  &amp;mon_list;
quit; 

%do i= 1 %to &amp;month_count.;   
%let month=%scan(&amp;MonthArray,&amp;i,' ') ;
data &amp;lib_name..a1801_&amp;month._&amp;model_name._score;
set &amp;lib_name..a1801_&amp;month._&amp;model_name._score;
if score &lt;400 then do;score_b=1;end;
else if score &lt;500 then do;score_b=2;end;
else if score &lt;550 then do;score_b=3;end;
else if score &lt;600 then do;score_b=4;end;
else if score &lt;650 then do;score_b=5;end;
else if score &lt;700 then do;score_b=6;end;
else if score &gt;=700 then do;score_b=7;end;
run;
proc sql;  
create table &amp;lib_name..a1802_&amp;model_name._&amp;month
(
   modelCHAR(12)
  ,month1  CHAR(8)
  ,clus        INTEGER
  ,total   INTEGER
);

insert into pm1.a1802_&amp;model_name._&amp;month
select &quot;&amp;model_name&quot; as model
       ,substr(state_date,3,2)||substr(state_date,6,2) as month1
   ,score_b as clus
   ,count(1) as total 
from  &amp;lib_name..a1801_&amp;month._&amp;model_name._score group by score_b;
quit;
%end;
%mend;

%let lib_name=pm1;%let model_name=final1;%let mon_list=pm1.month;%MonthScore(&amp;lib_name,&amp;model_name,&amp;mon_list);
</code></pre>

<h1>19.变量稳定性分月占比</h1>
<pre><code>******************************************************************************;
*** 19变量稳定性分月占比   ***; 
******************************************************************************; 

data varlist;
  input name $32.;
  cards;
max_cpd_b
kptp_b
ontime_pay_b
person_sex_b
over_due_value_b
city_b
education_b
max_roll_seq_b
tot_credit_amount_b
payfee_b
  ;
run; 

data _null_;  
  set varlist;  
  call symput('varn'||left(put(_n_,4.)),compress(_n_));   
  call symput('name'||left(put(_n_,4.)),trim(name));   
run;  
%put &amp;=varn1 &amp;=name1; 
%put &amp;=varn2 &amp;=name2; 

proc sql; 
select count(name) into: varnum_count from varlist; 
quit;   

%macro var_stable(dsin,dsout);
proc sql;  
create table &amp;dsout.
(
  month CHAR(10),
  VAR_NAME  CHAR(32),
  clus  INTEGER,
  N INTEGER,
  N1INTEGER,
  bad_rate  DECIMAL(8,4)

);

%do i= 1 %to &amp;varnum_count.;
insert into &amp;dsout.
select state_month as month 
   ,&quot;&amp;&amp;name&amp;i.&quot; as VAR_NAME
   ,&amp;&amp;name&amp;i. as clus
   ,count(1) as N 
   ,sum(target) as N1
   ,sum(target)/count(1) as bad_rate
from  &amp;dsin. 
group by state_month, &amp;&amp;name&amp;i.;
%end;
quit;

%mend;

%let dsin=pm1.a1401_dat_all_final1;%let dsout=pm1.a1902_stable_perf_pct;%var_stable(&amp;dsin,&amp;dsout);

proc print data=pm1.a1902_stable_perf_pct; run;
</code></pre>


</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->
